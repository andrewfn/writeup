<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="Generator" content="Writeup v 2.49.04 (2013-11-12)" />
<style type="text/css">table.borders {border-width: 2px; border-spacing:2px; border-style:outset; border-color:gray;}
table.borders th, table.borders td {border-width:1px; padding:1px 5px; border-style:inset; vertical-align:top;}
table.borders th {background-color:#DDD;}
table.borders tbody th {text-align:left;}
table.borders p, table.borders ul, table.borders ol {margin-top:0; margin-bottom:0;}
h1 {color:darkblue; border-bottom:solid windowtext 1.0pt; padding:0in 0in 1.0pt 0in;}
div.indent {margin-left:40px;}
ul.plainlist {list-style-type:none;}
.red {color:red; font-weight:bold;} .blue {color:blue;} h1 {margin-bottom:0;} h2 {color:darkblue;} h3 {color:blue;}
table.borders tbody th.demo {background-color:#EEE; font-weight:normal;}
pre, code {color:maroon; font-weight:bold;} code.variable, .codeoutput {color:darkgreen; font-weight:bold;}
table.codeoutput {margin-left:40px; background-color:#DDD;}
pre {white-space: pre-wrap; white-space: -moz-pre-wrap !important; white-space: -pre-wrap; white-space: -o-pre-wrap; word-wrap:break-word; margin:0;}
pre.back {background:#EEF; border: 1px solid #BBB;}
body > pre {margin-left:40px;}
col.c20 {width:20%;} col.c25 {width:25%;} col.c30 {width:30%;} col.c35 {width:35%;} col.c40 {width:40%;} col.c50 {width:50%;}
div.toc2, p.toc2 {font-weight:bold; margin-bottom:0;}
.red {color:red; font-weight:bold;} .blue {color:blue; font-weight:bold;} .docNL {color:#888;}
pre.indent {margin-left:40px;}</style>
<title>Writeup 2.5 Complete Reference Guide</title>
</head>
<body>

<style type="text/css" scoped>  time {border-bottom: 1px dotted #0A0; cursor:help;} time:hover {border:none;} col.c2 {width:400px; background-color:yellow;} col.c3 {background-color:blue;} </style>

<h1>Writeup 2.5 Complete Reference Guide</h1>
<p style="text-align:right;color:#999;margin:0;font-size:80%;"><em>Last updated on 2013-10-22 at 01:23:45 by Andrew Fountain for version  2.49.04 (2013-11-12)</em></p>

<h2>Table of Contents</h2>
<ul class="plainlist toc3" style="list-style-type:none;"><li><a href="#philosophy">0.1 Philosophy</a></li></ul>
<p class="toc2"><a href="#general_syntax">1. General Syntax</a></p>
<p class="toc2"><a href="#command_line_options">2. Command Line Options</a></p>
<ul class="plainlist toc3" style="list-style-type:none;"><li><a href="#examples_of_command_line_options">2.1 Examples of Command line options</a></li>
<li class="toc3"><a href="#file_type_detection">2.2 File type detection</a></li></ul>
<p class="toc2"><a href="#markup_language">3. Markup Language</a></p>
<ul class="plainlist toc3" style="list-style-type:none;"><li><a href="#inline_character_markup">3.1 Inline Character Markup</a>
<ul class="plainlist toc4" style="list-style-type:none;"><li><a href="#links_and_images">3.1.1 Links and Images</a></li>
<li class="toc4"><a href="#special_characters">3.1.2 Special Characters</a></li>
<li class="toc4"><a href="#escaped_characterssequences">3.1.3 Escaped characters/sequences</a></li>
<li class="toc4"><a href="#pre_defined_symbols">3.1.4 Pre-defined symbols</a></li></ul></li>
<li class="toc3"><a href="#line_breaks">3.2 Line Breaks</a></li>
<li class="toc3"><a href="#block_markup">3.3 Block Markup</a>
<ul class="plainlist toc4" style="list-style-type:none;"><li><a href="#headings">3.3.1 Headings</a></li>
<li class="toc4"><a href="#lists">3.3.2 Lists</a></li>
<li class="toc4"><a href="#tables">3.3.3 Tables</a></li></ul></li>
<li class="toc3"><a href="#comments">3.4 Comments</a></li>
<li class="toc3"><a href="#inline_code_and_pre">3.5 Inline Code and Pre</a>
<ul class="plainlist toc4" style="list-style-type:none;"><li><a href="#codex63x6fx64x65code_and_codex70x72x65code">3.5.1 <code>&lt;code&gt;</code> and <code>&lt;pre&gt;</code></a></li>
<li class="toc4"><a href="#inline_code_passed_through_raw">3.5.2 Inline code (passed through raw)</a></li></ul></li></ul>
<p class="toc2"><a href="#text_processing_language">4. Text Processing Language</a></p>
<ul class="plainlist toc3" style="list-style-type:none;"><li><a href="#basic_variable_assignment_and_function_definition">4.1 Basic variable assignment and function definition</a>
<ul class="plainlist toc4" style="list-style-type:none;"><li><a href="#whole_line_variable_assignment">4.1.1 Whole line variable assignment</a></li>
<li class="toc4"><a href="#inline_variable_assignment">4.1.2 Inline variable assignment</a></li>
<li class="toc4"><a href="#inserting_the_value_of_variables_into_the_document_ie_printing">4.1.3 Inserting the value of variables into the document (i.e. printing)</a></li>
<li class="toc4"><a href="#block_variable_assignment">4.1.4 Block variable assignment</a></li>
<li class="toc4"><a href="#single_character_variables">4.1.5 Single Character variables</a></li>
<li class="toc4"><a href="#parentheses">4.1.6 Parentheses</a></li></ul></li>
<li class="toc3"><a href="#function_parameters_passing_arguments">4.2 Function Parameters—passing arguments</a>
<ul class="plainlist toc4" style="list-style-type:none;"><li><a href="#the_parameter_list">4.2.1 The Parameter List</a></li>
<li class="toc4"><a href="#default_parameters">4.2.2 Default Parameters</a></li>
<li class="toc4"><a href="#default_parameters_the_hard_way">4.2.3 Default Parameters, the hard way</a></li>
<li class="toc4"><a href="#parsing_arguments_manually">4.2.4 Parsing Arguments manually</a></li>
<li class="toc4"><a href="#example_of_multi_line_parameters">4.2.5 Example of multi-line parameters</a></li></ul></li>
<li class="toc3"><a href="#flow_control">4.3 Flow Control</a>
<ul class="plainlist toc4" style="list-style-type:none;"><li><a href="#if">4.3.1 If</a></li>
<li class="toc4"><a href="#include">4.3.2 Include</a>
<ul class="plainlist toc5" style="list-style-type:none;"><li><a href="#include_paths">4.3.2.1 Include paths</a></li></ul></li>
<li class="toc4"><a href="#exit">4.3.3 exit</a></li></ul></li>
<li class="toc3"><a href="#pre_defined_constants">4.4 Pre-defined constants</a></li>
<li class="toc3"><a href="#pre_defined_variables">4.5 Pre-defined variables</a>
<ul class="plainlist toc4" style="list-style-type:none;"><li><a href="#url_root_and_base_values">4.5.1 URL root and base values</a></li></ul></li>
<li class="toc3"><a href="#switches">4.6 Switches</a></li>
<li class="toc3"><a href="#pre_defined_inline_functions">4.7 Pre-defined Inline Functions</a>
<ul class="plainlist toc4" style="list-style-type:none;"><li><a href="#variable_handling">4.7.1 Variable handling</a></li>
<li class="toc4"><a href="#numeric_functions">4.7.2 Numeric Functions</a></li>
<li class="toc4"><a href="#text_processing_functions">4.7.3 Text processing Functions</a></li>
<li class="toc4"><a href="#timedate_processing_functions">4.7.4 Time/Date processing Functions</a></li>
<li class="toc4"><a href="#other_functions">4.7.5 Other Functions</a></li></ul></li></ul>
<p class="toc2"><a href="#defining_new_keyword_patterns">5. Defining New Keyword Patterns</a></p>
<ul class="plainlist toc3" style="list-style-type:none;"><li><a href="#simple_replacements">5.1 Simple replacements</a></li>
<li class="toc3"><a href="#alternating_replacements">5.2 Alternating replacements</a></li>
<li class="toc3"><a href="#paired_replacements">5.3 Paired replacements</a></li>
<li class="toc3"><a href="#limitations">5.4 Limitations</a></li></ul>
<p class="toc2"><a href="#htmlxmlcss_attribute_generation">6. HTML/XML/CSS Attribute Generation</a></p>
<ul class="plainlist toc3" style="list-style-type:none;"><li><a href="#attribute_variables">6.1 Attribute variables</a></li>
<li class="toc3"><a href="#paragraph_or_other_block_tags">6.2 Paragraph or other block tags</a></li>
<li class="toc3"><a href="#setting_the_colgroup_tag">6.3 Setting the colgroup tag</a></li>
<li class="toc3"><a href="#controlling_the_html_generated_by_markup">6.4 Controlling the HTML generated by Markup</a></li>
<li class="toc3"><a href="#the_tag_stack">6.5 The Tag Stack</a></li>
<li class="toc3"><a href="#tag_hook_functions">6.6 Tag hook functions</a></li></ul>
<p class="toc2"><a href="#supported_features_in_github_gfm_and_markdown">7. Supported features in Github GFM and Markdown</a></p>
<ul class="plainlist toc3" style="list-style-type:none;"><li><a href="#markdown_feature_support">7.1 Markdown Feature support</a></li>
<li class="toc3"><a href="#github_gfm_feature_support">7.2 Github GFM Feature Support</a></li></ul>
<p class="toc2"><a href="#known_limitations">8. Known limitations</a></p>
<hr style="page-break-before:always; margin-top:0;" />

<p>Writeup is a tool for generating content. It takes a plain text file and processes it into HTML, XML and/or CSS. It has three components:</p>
<ol type="1" style="list-style-type:decimal;"><li>A <strong>markup language</strong>, similar to Markdown or textile.</li>
<li>A <strong>pre-processing language</strong> with variables, functions, conditional compilation and includes.</li>
<li>HTML/XML/CSS generation fuctionality for <strong>classes, styles and other attributes</strong>.</li></ol>
<ul><li class="newline">The program is run from the command line using the syntax: <code>writeup [options] sourcefile</code>
<ul><li>There are many command-line options which are documented with the <code>--help</code> option.</li></ul></li></ul>

<h3 id='philosophy'>0.1 Philosophy</h3>
<ul><li>As simple as possible for the end-user to create complex documents. They need know <em>nothing</em> about Writeup</li>
<li>The end-user writes semantically and does not have to worry about markup</li>
<li>Write once, use everwhere. A single source document can be used for web-pages, slide presentations, printed copy etc.</li>
<li>All the complexities of markup are abstracted into functions contained in include files</li>
<li>These functions are hidden from the user and are created by Writeup “experts” who have mapped the simple syntax given to end-users into the desired markup for whatever use will be made of the document</li></ul>

<h2 id='general_syntax'>1. General Syntax</h2>
<ul><li>A Writeup file is a simple text file.
<ul><li>(Can be either in ascii or utf-8. Line endings can be unix or dos style.)</li></ul></li>
<li>The first line of the file is usually a heading or a comment. If so, it will be used to generate the title of the document. See <a href="#file_type_detection">File type detection</a> for more details.</li>
<li>When the <code>--strick</code> option is set, at some point in the file the constant <code>$VER</code> should be set to the version of Writeup that the document was written to.
<ul><li>(The purpose of this is that if api changes are made in the future, this will “future-proof” your document.)</li></ul></li>
<li>Each line normally generates a block element, so a paragraph is one long line, (propbably wrapping in your text editor).</li>
<li>Any line can contain a comment using <code>//</code>
<ul><li>A valid comment must have whitespace either before or after the <code>//</code>, and not have a <code>:</code> before.
<ul><li>e.g. <code>http://</code> does not count as a comment, nor does <code>path//path/filename.txt</code></li></ul></li>
<li>To intentionally force <code>//</code> in a line, use the <code>$SLASHES</code> constant.</li></ul></li>
<li>All white space is stripped from the end of lines</li>
<li>A line may be continued (joined with the following line) by ending it with a <code>\</code></li>
<li>If the document is stored in a version control system, such as Subversion, then if a line such as:
<div><code>$ID=$Id: fullref.txt 508 2013-09-23 04:02:35Z andrewfn $</code></div>
<div>is inserted near the top of the document, it will allow Writeup to extract version control metadata for use in the document.</div></li>
<li>Tabs are treated as a single white space</li></ul>

<h2 id='command_line_options'>2. Command Line Options</h2>
<ul><li>This is the output from the <code>--help</code> option</li></ul>
<div style="margin-left:2em;">
<pre>
writeup: allows complex HTML documents to be generated from plain text files

usage: writeup [options] [-o &lt;outfile&gt;] &lt;infile&gt;
  options: -h|?|--help --usage --version -v[v]|--verbose|-q[q]|--quiet --debug

-b    --body       body only (no headers)
      --debug      same as -vvvvv
-f    --for        &lt;outputtype&gt; set the $FOR variable, default -f web
-g    --github     enable Markdown with GitHub enhancements
-h    --help       display help
-I    --noinclude  no includes allowed in body (for security)
-k    --strict     striKt checKing for valid syntax
-o    --output     &lt;outfile&gt; output to outfile rather than infile.html
-m    --markdown   enable Markdown compatibility
-p    --process    language processor only, no html rendering (for testing)
-q[q] --quiet      quiet   (-qq very quiet)
-r    --stdout     redirect output to stdout
-s[s] --set        &lt;set&gt; set a variable e.g. -s test=true
      --usage      summary of usage
-v[v] --verbose    verbose (-vv very verbose)
-V    --version    version string
      --versionnum version number
-x    --extract    &lt;varname&gt; extract varible to stdout or to file if -o defined
-X    --export     &lt;[$]pattern&gt; export variables in bash or Writeup format
-y    --yes        answer Yes to any keyboard prompts

Version:  2.49.04 (2013-11-12) by Andrew M Fountain, http://writeup.org
Copyright (c) Andrew M. Fountain, 2013
</pre>
</div>
<ul><li>Note that the values of <code>--body</code>, <code>--process</code>, <code>--markdown</code> and  <code>--github</code>, plus the effects of <code>--quiet</code>, <code>--verbose</code> and <code>--debug</code> can be set within the document using variables. See <a href="#pre_defined_variables">Pre-defined variables</a> for details.</li></ul>

<h3 id='examples_of_command_line_options'>2.1 Examples of Command line options</h3>
<ul><li><code>writeup -Iybqq -o myfile-out.html -s include=recipe_inc.txt -s format=Recipe -s VER=2.0 myfile.txt</code>
<ul><li><code>-I</code> No includes allowed in body; <code>-y</code> yes to questions; <code>-b</code> HTML body only; <code>-qq</code> very quiet; <code>-o</code> output file myfile-out.html</li>
<li><code>-s</code> set include file; <code>-s</code> set <code>$format</code> variable; <code>-s</code> set <code>$VER</code></li>
<li>Note that setting <code>VER</code> or <code>--body</code> from the command line has the side-effect of supressing the check for a well-formed title line (to allow for the processing of simple text fragments).</li></ul></li></ul>

<h3 id='file_type_detection'>2.2 File type detection</h3>
<ul><li>A well-formed Writeup main document will usually begin with <code>.Title of Document</code> which will start the document with the title as an h1, and also set the document title tag
<ul><li>To start with a lower level h-tag, use more dots, e.g. <code>..Title of Document</code> for h2</li>
<li>To supress a heading tag at the top of the document, use the syntax: <code>//.Title of Document</code> (no spaces at the start)</li></ul></li>
<li>To mark the document as another <code>$TYPE</code> then place the type name between the
<ul><li>e.g. if first line begins with <code>//inc.Title of document</code> then <code>$TYPE</code> will be set to inc if an attempt is made to run the file as the main document</li>
<li>The main purpose for this type detection is for document management tools</li></ul></li>
<li>If the value of <code>$VER</code> is set from the command line then it will force Writeup to recognize the document as being in Writeup format (to allow, for example, web pages to be processed where <code>$VER</code> is not set, nor is there any top-line title.</li></ul>

<h2 id='markup_language'>3. Markup Language</h2>

<h3 id='inline_character_markup'>3.1 Inline Character Markup</h3>
<ul><li><em>Note that the effect of each markup is completely redefinable</em></li></ul>
<table class="borders" style="table-layout: fixed; width:100%;"><colgroup><col /><col class="c40" /><col class="c40" /></colgroup>
<tr><th class="demo">Emphasize/italic:
</th>
<td><code>_underscore_ defaults to em (italic) unless alphanumeric_both2_sides</code></td>
<td><em>underscore</em> defaults to em (italic) unless alphanumeric_both2_sides 
</td></tr>
<tr><th class="demo">Bold/strong:
</th>
<td><code>*asterisks* default to strong (bold) text</code></td>
<td><strong>asterisks</strong> default to strong (bold) text 
</td></tr>
<tr><th class="demo">Smart quotes can be supressed using <code>$smartquotes</code> variable:
</th>
<td><code>'single, "double" &lt;&lt;angle&gt;&gt; &amp; apostrophe's glyph</code></td>
<td>‘single, “double” «angle» &amp; apostrophe’s glyph 
</td></tr>
<tr><th class="demo">en dash (medium):
</th>
<td><code>range 1--10 or if a space both -- sides. Force with ':-' e.g. May:-June</code></td>
<td>range 1–10 or if a space both – sides. Force with ‘:-’ e.g. May–June 
</td></tr>
<tr><th class="demo">em dash (long):
</th>
<td><code>All other cases give em--dash. Using '---' e.g. 1---10 will force em-dash</code></td>
<td>All other cases give em—dash. Using ‘—’ e.g. 1—10 will force em-dash 
</td></tr>
<tr><th class="demo">Three ways of getting a non-break space:
</th>
<td><code>Non-break space: (\/), ($SP) or (&amp;nbsp;)</code></td>
<td>Non-break space: ( ), ( ) or (&nbsp;) 
</td></tr>
</table>

<h4 id='links_and_images'>3.1.1 Links and Images</h4>
<table class="borders" style="table-layout: fixed; width:100%;"><colgroup><col /><col class="c40" /><col class="c40" /></colgroup>
<tr><th class="demo">Hyperlinks:
</th>
<td><code>[[http://writeup.org]] no link text,<span class="docNL">↵</span>
or [[http://writeup.org with linking text]]</code></td>
<td><a href="http://writeup.org">writeup.org</a> no link text,
<p>or <a href="http://writeup.org">with linking text</a> </p>
</td></tr>
<tr><th class="demo">Autolinks are turned on by default <code>$autolinks=TRUE</code>.<br />Delimited by any non-alphanum at start and whitespace at end:
</th>
<td><code>http://gw.ca/link or https://gw.ca/xx or -http://gw.ca/. or (http://gw.ca/), But not xhttp://gw.ca or [[gw.ca within another link http://gw.ca]]. Note that any .,:;) characters at the end of the url will not be included in the link.</code></td>
<td><a href="http://gw.ca/link">gw.ca/link</a> or <a href="https://gw.ca/xx">gw.ca/xx</a> or -<a href="http://gw.ca/">gw.ca/</a>. or (<a href="http://gw.ca/">gw.ca/</a>), But not xhttp://gw.ca or <a href="gw.ca">within another link http://gw.ca</a>. Note that any .,:;) characters at the end of the url will not be included in the link. 
</td></tr>
<tr><th class="demo">Links longer than <code>$autolinkslen</code> are displayed abbreviated…:
</th>
<td><code>The link: http://gw.ca/content/long-link.of-meaningless-words is abbreviated.</code></td>
<td>The link: <a href="http://gw.ca/content/long-link.of-meaningless-words">gw.ca/…nk.of-meaningless-words</a> is abbreviated. 
</td></tr>
<tr><th class="demo">Hyperlinks can span multiple lines, if <code>/</code> used to supress paragraph-per-line:
</th>
<td><pre>/[[http://gw.ca<span class="docNL">↵</span>
...Linked heading<span class="docNL">↵</span>
]]</pre></td>
<td>
<a href="http://gw.ca
...Linked">heading
</a> 
</td></tr>
<tr><th class="demo">Mailto links are obfuscated by default to deter spammers. (Turn this off with <code>$emailhide=FALSE</code>:
</th>
<td><code>[[mailto:a@gw.ca]]</code></td>
<td><a href="m&#x0061;&#x69;&#0108;&#116;&#0111;&#x003A;a&#x40;&#x67;w&#046;&#099;&#97;">&#97;&#64;&#x0067;&#119;&#x2E;&#x63;&#097;</a> 
</td></tr>
<tr><th class="demo">MediaWiki style hyperlinks can be achieved by setting <code>[=${LINK}</code> and <code>]=&lt;/a&gt;</code>:
</th>
<td><code>MediaWiki style link [http://writeup.org with linking text]</code></td>
<td>MediaWiki style link <a href="http://writeup.org">with linking text</a> 
</td></tr>
<tr><th class="demo">Images:
</th>
<td><code>No alt/title text [[writeup32.png]] or with alt and title text [[writeup32.png Writeup logo]]</code></td>
<td>No alt/title text <img src="writeup32.png" alt="image: writeup32.png" /> or with alt and title text <img src="writeup32.png" alt="Writeup logo" title="Writeup logo" /> 
</td></tr>
<tr><th class="demo">Autolinks work in exactly the same way with images:
</th>
<td><code>Here is an image http://writeup.org/writeup32.png in the text</code></td>
<td>Here is an image <img src="http://writeup.org/writeup32.png" alt="image: writeup32.png" /> in the text 
</td></tr>
<tr><th class="demo">To link to an image, override the URL detection by setting <code>$mediatype</code>:
</th>
<td><code>$set $mediatype1=link [[writeup32.png This is a link to the image]].</code></td>
<td><a href="writeup32.png">This is a link to the image</a>. 
</td></tr>
<tr><th class="demo">Using <code>$hrefroot</code> &amp; <code>$imgroot</code>:
</th>
<td colspan="2">See below in <a href="#url_root_and_base_values">URL root and base values</a> to see how url’s can have strings automatically prepended to them.</td>
</tr>
</table>

<h4 id='special_characters'>3.1.2 Special Characters</h4>
<table class="borders">
<tr><th class="demo">Will use literal character entities for &lt; &gt; &amp; unless part of html structure:
</th>
<td><code>&lt; &gt; and &amp; but &lt;u&gt;tag&lt;/u&gt; and &amp;#x25CF; and &amp;reg;.</code></td>
<td>&lt; &gt; and &amp; but <u>tag</u> and &#x25CF; and &reg;. 
</td></tr>
<tr><th class="demo">utf-8 characters and named/numbered entities can simply be inserted:
</th>
<td><code>UTF8: ⅞ Named entity: &amp;pound; Numbered: &amp;#x00A3;</code></td>
<td>UTF8: ⅞ Named entity: &pound; Numbered: &#x00A3; 
</td></tr>
</table>

<h4 id='escaped_characterssequences'>3.1.3 Escaped characters/sequences</h4>
<table class="borders">
<tr><th class="demo">Characters can be forced to be literal with ‘\’:
</th>
<td><code> \\ \* \$ \_ \a</code></td>
<td> \ * $ _ a 
</td></tr>
<tr><th class="demo">To get <code>$lt; &amp;gt; $amp; &amp;quot; &amp;apos; &amp;nbsp;</code>:
</th>
<td><code> \&lt; \&gt; \&amp; \" \' word\/word</code></td>
<td> &lt; &gt; &amp; &quot; &apos; word word 
</td></tr>
<tr><th class="demo">Special cases for forcing non-escaped characters:
</th><td><code>\! \n</code></td><td> <strong>|</strong> <em>end-of-line</em> 
</td></tr>
<tr><th class="demo">Hexadecimal single-byte characters or unicode (utf8):
</th>
<td><code>Hex: (\x7E) Unicode: \u25CF</code></td>
<td>Hex: (~) Unicode: ● 
</td></tr>
</table>

<h4 id='pre_defined_symbols'>3.1.4 Pre-defined symbols</h4>
<ul><li>Although these are considered constants, they can be re-assigned to a new value if necessary, e.g. a different asterisk character could be used or it could be wrapped in a span</li></ul>
<table class="borders">
<tr><th class="demo">Named character constants:
</th>
<td><code>$CENT $POUND $EURO $YEN $COPYRIGHT</code></td>
<td>¢ £ € ¥ © 
</td></tr>
<tr><th class="demo">Fractions:
</th>
<td><pre>$QUARTER $HALF $THREEQUARTERS<span class="docNL">↵</span>
$THIRD $TWOTHIRDS</pre></td>
<td>
<p>¼ ½ ¾</p>
<p>⅓ ⅔ </p>
</td></tr>
<tr><th class="demo">Punctuation:
</th>
<td><pre>$MDASH $NDASH<span class="docNL">↵</span>
$LSQUO $RSQUO $LDQUO $RDQUO $LAQUO $RAQUO</pre></td>
<td>
<p>— –</p>
<p>‘ ’ “ ” « » </p>
</td></tr>
<tr><th class="demo">Dots:
</th>
<td><code>$DOT $BULL $BULLET $ELIP</code></td>
<td>· • ● … 
</td></tr>
<tr><th class="demo">Misc (note <code>$SLASH == \x2F</code>):
</th>
<td><code>$LT $GT $AMP $QUOT $APOS $SLASH $SLASHES</code></td>
<td>&lt; &gt; &amp; &quot; &apos; / // 
</td></tr>
<tr><th class="demo">Others:
</th>
<td><pre>$ASTERISK $UNDERSCORE $UNDERLINE<span class="docNL">↵</span>
$ATSYMBOL $CIRCUMFLEX $PERCENT $HASH $DOLLAR</pre></td>
<td>
<p>* _ _</p>
<p>@ ^ % # $ </p>
</td></tr>
<tr><th class="demo">Spaces:
</th>
<td><pre>non-break:($SP) or (\/)<span class="docNL">↵</span>
em:($EMSP)<span class="docNL">↵</span>
regular space: ($SPACE) or (\ )<span class="docNL">↵</span>
null: ($NULL)<span class="docNL">↵</span>
zero width space (for allowing word breaks): ($ZWSP)</pre></td>
<td>
<p>non-break:( ) or ( )</p>
<p>em:( )</p>
<p>regular space: ( ) or ( )</p>
<p>null: ()</p>
<p>zero width space (for allowing word breaks): (​) </p>
</td></tr>
</table>

<h3 id='line_breaks'>3.2 Line Breaks</h3>
<ul><li>Unless within a table (see below), a vertical bar <code>|</code> is identical to starting a new line
<ul><li>This is for convenience when it is easier to combine several lines together e.g. <code>$if $test|*testing*|$endif</code></li></ul></li>
<li>To get a vertical bar, use the <code>$VB</code> constant</li>
<li>To generate a newline within a function, use <code>$VB</code> or <code>\n</code></li>
<li>To end a line with an HTML break <code>&lt;br /&gt;</code>, simply end it with <code>/</code>
<ul><li>Alternatively the <code>$BR</code> constant can be used</li></ul></li>
<li>A line that begins with just two minus signs <code>--</code> will create a horizontal rule <code>&lt;hr /&gt;</code></li></ul>
<hr />

<ul><li>If it begins with three <code>---</code> then it will cause a page break. (This is accomplished by adding the css contained in the variable <code>$pagebreakstyle</code> (see below) to the subsequent block tag.</li></ul>

<h3 id='block_markup'>3.3 Block Markup</h3>

<h4 id='headings'>3.3.1 Headings</h4>
<ul><li>Note that in some situations a document that is included in another might need all its heading levels adjusted. e.g h1→h2 etc. This can be accomplished by setting <code>$headingbase</code> the value of which will be added to the heading level.</li></ul>
<table class="borders" style="table-layout: fixed; width:100%;"><colgroup><col /><col class="c40" /><col class="c40" /></colgroup>
<tr><th class="demo">Heading tags 1–6 are supported:
</th>
<td><pre>...Heading level 3 (h3 tag)<span class="docNL">↵</span>
.....Heading level 5 (h5 tag)<span class="docNL">↵</span>
......Heading level 6 (h6 tag)</pre></td>
<td>

<h3>Heading level 3 (h3 tag)</h3>

<h5>Heading level 5 (h5 tag)</h5>

<h6>Heading level 6 (h6 tag) </h6>
</td></tr>
<tr><th class="demo">if <code>$headingbase</code> is set, it is added to the level:
</th>
<td><pre>$set $headingbase=2 <span class="docNL">↵</span>
.Heading level 3 (using only 1 dot)</pre></td>
<td>

<h3>Heading level 3 (using only 1 dot) </h3>
</td></tr>
</table>
<ul><li>Note that if <code>$autoclose</code> is set to <code>TRUE</code> any open tags are closed at the end of the block with no error messages.</li></ul>

<h4 id='lists'>3.3.2 Lists</h4>
<table class="borders" style="table-layout: fixed; width:100%;"><colgroup><col /><col class="c40" /><col class="c40" /></colgroup>
<tr><th class="demo">Ordered lists:
</th>
<td><pre>1. Can use a number<span class="docNL">↵</span>
#. or default numbering<span class="docNL">↵</span>
5. New numbering sequence<span class="docNL">↵</span>
 A. indent to start nested list<span class="docNL">↵</span>
 #. and so on<span class="docNL">↵</span>
  i. upper or lower case or roman numerals<span class="docNL">↵</span>
  ii. Any depth of list supported<span class="docNL">↵</span>
 #. Indent one space per level of nesting<span class="docNL">↵</span>
#. Back to top level</pre></td>
<td>
<ol type="1" style="list-style-type:decimal;"><li>Can use a number</li>
<li>or default numbering</li>
<li value="5">New numbering sequence
<ol type="A" style="list-style-type:upper-alpha;"><li>indent to start nested list</li>
<li>and so on
<ol type="i" style="list-style-type:lower-roman;"><li>upper or lower case or roman numerals</li>
<li>Any depth of list supported</li></ol></li>
<li>Indent one space per level of nesting</li></ol></li>
<li>Back to top level </li></ol>
</td></tr>
<tr><th class="demo">Unordered lists:
</th>
<td><pre>-Simply use minus sign<span class="docNL">↵</span>
 -and indentations<span class="docNL">↵</span>
 a. Can be mixed with ordered lists<span class="docNL">↵</span>
 b. to any depth<span class="docNL">↵</span>
  -third level<span class="docNL">↵</span>
  -and again</pre></td>
<td>
<ul><li>Simply use minus sign
<ul><li>and indentations</li></ul>
<ol type="a" style="list-style-type:lower-alpha;"><li>Can be mixed with ordered lists</li>
<li>to any depth
<ul><li>third level</li>
<li>and again </li></ul></li></ol></li></ul>
</td></tr>
<tr><th class="demo">Plain lists
<p>These are what GML called “simple lists” but the <code>&lt;sl&gt;</code> tag never made it into HTML so we fake it with <code>&lt;ol&gt;</code> and <code>list-style-type:none;</code>.</p>
<p>Set <code>$plainlists</code> FALSE to ignore whitespace at the start of lines.:</p>
</th>
<td><pre>Plain list<span class="docNL">↵</span>
 Simply indent<span class="docNL">↵</span>
  one space per level<span class="docNL">↵</span>
  and it works as expected.<span class="docNL">↵</span>
 -It can also be used to add extra paragraphs<span class="docNL">↵</span>
  to one of the other lists<span class="docNL">↵</span>
Turn off plainlists $set $plainlists=FALSE <span class="docNL">↵</span>
   Indent ignored!</pre></td>
<td>
<p>Plain list</p>
<ul class="plainlist" style="list-style-type:none;"><li>Simply indent
<ul class="plainlist" style="list-style-type:none;"><li>one space per level</li>
<li>and it works as expected.</li></ul>
<ul><li>It can also be used to add extra paragraphs
<div>to one of the other lists</div></li></ul></li></ul>
<p>Turn off plainlists </p>
<p>Indent ignored! </p>
</td></tr>
<tr><th class="demo">Lists extras:
</th>
<td><pre>A blank line before a list item puts the "firstline" class on it:<span class="docNL">↵</span>
<span class="docNL">↵</span>
-CSS can then be used to create extra space etc. e.g.: .firstline {margin-top: 6px;}<span class="docNL">↵</span>
 -Sometimes a list level needs to be forcibly ended, and this can be done with a minus exclamation mark:<span class="docNL">↵</span>
-!<span class="docNL">↵</span>
-New list started</pre></td>
<td>
<p>A blank line before a list item puts the “firstline” class on it:</p>
<ul><li style="margin-top: 6px;">CSS can then be used to create extra space etc. e.g.: .firstline {margin-top: 6px;}
<ul><li>Sometimes a list level needs to be forcibly ended, and this can be done with a minus exclamation mark:</li></ul></li></ul>

<ul><li>New list started </li></ul>
</td></tr>
</table>
<ul><li><strong>Note:</strong> Plain lists are implemented with a <code>&lt;div class="plainlist" style="margin-left:40px;"</code>. The inline style is included in case no CSS is set, but can be suppressed using <code>$unset $div_plainlist_style</code>.</li></ul>

<h4 id='tables'>3.3.3 Tables</h4>
<table class="borders" style="table-layout: fixed; width:100%;"><colgroup><col /><col class="c40" /><col class="c40" /></colgroup>
<tr><th class="demo">Tables are started and ended with four hyphens:
</th>
<td><pre>----<span class="docNL">↵</span>
| table cell | table cell |<span class="docNL">↵</span>
| table cell | table cell |<span class="docNL">↵</span>
----<span class="docNL">↵</span>
</pre></td>
<td>
<table class="borders headnone"><tbody>
<tr>
<td>table cell </td>
<td> table cell </td></tr>
<tr>
<td>table cell </td>
<td> table cell </td></tr>
</tbody></table>

</td></tr>
<tr><th class="demo">The top cells can be headings by adding a <strong>“t”</strong>:
</th>
<td><pre>----t<span class="docNL">↵</span>
| table head | table head |<span class="docNL">↵</span>
| table cell | table cell |<span class="docNL">↵</span>
----<span class="docNL">↵</span>
</pre></td>
<td>
<table class="borders headtop"><thead>
<tr>
<th>table head </th>
<th> table head </th></tr>
</thead><tbody>
<tr>
<td>table cell </td>
<td> table cell </td></tr>
</tbody></table>

</td></tr>
<tr><th class="demo">The left by adding <strong>“l”</strong>, or both with <strong>“tl”</strong>:
</th>
<td><pre>----tl<span class="docNL">↵</span>
| table head | table head | table head |<span class="docNL">↵</span>
| table head | table cell | table cell |<span class="docNL">↵</span>
----<span class="docNL">↵</span>
</pre></td>
<td>
<table class="borders headboth"><thead>
<tr>
<th>table head </th>
<th> table head </th>
<th> table head </th></tr>
</thead><tbody>
<tr>
<th>table head </th>
<td> table cell </td>
<td> table cell </td></tr>
</tbody></table>

</td></tr>
<tr><th class="demo">Tables can also be created using a line (or multiple lines) per cell.
<ul><li><code>--cell</code> at the line start creates a new cell.</li>
<li><code>----row</code> will start a new row.</li>
<li>Cell content can be on the same and/or following lines.</li>
<li>first <code>----row</code> in table is optional.:</li></ul>
</th>
<td><pre>----t<span class="docNL">↵</span>
every line<span class="docNL">↵</span>
is in a cell<span class="docNL">↵</span>
--cell Then the next cell<span class="docNL">↵</span>
--cell and<span class="docNL">↵</span>
a third cell<span class="docNL">↵</span>
----row A new row<span class="docNL">↵</span>
implicitly a new cell<span class="docNL">↵</span>
--cell second column<span class="docNL">↵</span>
--cell third column<span class="docNL">↵</span>
----row<span class="docNL">↵</span>
--cell and<span class="docNL">↵</span>
--cell one more<span class="docNL">↵</span>
--cell row<span class="docNL">↵</span>
----<span class="docNL">↵</span>
</pre></td>
<td>
<table class="borders headtop"><thead>
<tr>
<th><p>every line</p>
<p>is in a cell</p></th>

<th><p>Then the next cell</p></th>

<th><p>and</p>
<p>a third cell</p></th></tr>
</thead><tbody>
<tr>
<td><p>A new row</p>
<p>implicitly a new cell</p></td>

<td><p>second column</p></td>

<td><p>third column</p></td></tr>

<tr>
<td><p>and</p></td>

<td><p>one more</p></td>

<td><p>row</p></td></tr>
</tbody></table>

</td></tr>
</table>

<h3 id='comments'>3.4 Comments</h3>
<table class="borders">
<tr><th class="demo">Anything after a <code>//</code> on the line is commented out:
</th>
<td><code><code>Anything after a // on the line is commented out</code></code></td>
<td>Anything after a 
</td></tr>
<tr><th class="demo">Block <code>/*</code> comments <code>*/</code> work as expected:
</th>
<td><code><code>Anything between /* on the line */ is commented out</code></code></td>
<td>Anything between  is commented out 
</td></tr>
<tr><th class="demo">HTML comments can simply be inserted:
</th>
<td><code>&lt;!--Here is an HTML comment.--&gt;</code></td>
<td><!--Here is an HTML comment.--> 
</td></tr>
<tr><th class="demo">Hard comments will not even appear in the html:
</th>
<td><code>The &lt;!!comment!!&gt; will be removed</code></td>
<td>The  will be removed 
</td></tr>
<tr><th class="demo">They can also be inserted programmatically:
</th>
<td><code>$set $a=&lt;!! $set $b=!!&gt; The $a disappearing $b word</code></td>
<td>The  word 
</td></tr>
</table>

<h3 id='inline_code_and_pre'>3.5 Inline Code and Pre</h3>

<h4 id='codex63x6fx64x65code_and_codex70x72x65code'>3.5.1 <code>&lt;code&gt;</code> and <code>&lt;pre&gt;</code></h4>
<ul><li class="newline">Surrounding inline text with &lt;( and )&gt; will
<ul><li>cause all markup to be escaped, e.g. <code>&lt;span&gt;</code></li>
<li>surround the text with <code>&lt;code&gt; ... &lt;/code&gt;</code></li></ul></li>
<li class="newline">If the &lt;( )&gt; block surrounds the whole line, or multiple lines, then the <code>&lt;pre&gt;</code> tag will be used, e.g.</li></ul>
<pre>
&lt;p&gt;this block is &lt;em&gt;all&lt;/em&gt; a &lt;pre&gt; tag
and can be multiple lines&lt;/p&gt;
</pre>

<h4 id='inline_code_passed_through_raw'>3.5.2 Inline code (passed through raw)</h4>

<h2 id='text_processing_language'>4. Text Processing Language</h2>

<h3 id='basic_variable_assignment_and_function_definition'>4.1 Basic variable assignment and function definition</h3>
<ul><li>A variable/function name consists of a <code>$</code> followed by one or more alphanumeric/underscore characters.</li>
<li>There are three ways of assigning variables: <em><strong>whole line</strong></em>, <em><strong>inline</strong></em> or <em><strong>block</strong></em></li>
<li><strong>Important:</strong> <em><strong>whole line</strong></em> and <em><strong>block</strong></em> assignments are “lazy” (the assigned string does not get evaluated until it is used), whereas <em><strong>inline</strong></em> assignment evaluates the string before putting it into the variable.
<ul><li><em><strong>inline</strong></em> assignment can be made lazy by putting the string in quotes. <em>(see example below)</em></li></ul></li></ul>

<h4 id='whole_line_variable_assignment'>4.1.1 Whole line variable assignment</h4>
<ul><li>If the first non-white-space character on a line is a valid variable name, <em>immediately</em> followed by <code>=</code> then the remainder of the line is assigned to the variable/function. e.g.<br />
<code>$var1=The contents of variable one // whole line assignment</code><br />
<code>$var1+=, and more content is appended to it</code>
<ul><li>resulting in: <strong>The contents of variable one, and more content is appended to it</strong></li>
<li>Note that all comments and trailing spaces will have been stripped.</li></ul></li>
<li>The main advantage of this method is that the string is only terminated by the end of the line</li>
<li>A multiline value can be created using <code>$NL</code> or <code>\n</code></li>
<li>The line may be continued onto multiple lines by placing <code>\</code> at the end</li></ul>

<h4 id='inline_variable_assignment'>4.1.2 Inline variable assignment</h4>
<ul><li>Variables and functions may also be created inline using <code>$set</code> and other functions listed below. e.g.<br />
<code>$set $var1=newvaluewithnospaces</code> or <code>$set $var1="The contents of variable one"</code></li>
<li>Many functions operate on the varible that was modified in the last <code>$set</code> or <code>$modify</code> function. (See <a href="#variable_handling">Variable handling</a> for more details) e.g.<br />
<code>$set $x=$y.plus( 2 )</code> or <code>$modify($name).concat(" B.Sc.")</code> <em>which is equivalent to:</em>
<div><code>$set $x=1 $plus 2</code> or <code>$modify $name $concat " B.Sc."</code></div></li>
<li>The expression <code>$set $x=$variable1</code> will evaluate <code>$variable1</code> before putting it into <code>$x</code></li>
<li>The expression <code>$set $x="$variable1"</code> will put the literal string <code>$variable1</code> into <code>$x</code> (i.e. evaluation is lazy).</li></ul>

<h4 id='inserting_the_value_of_variables_into_the_document_ie_printing'>4.1.3 Inserting the value of variables into the document (i.e. printing)</h4>
<ul><li>Simply including the variable name, e.g. <code>$var</code> will insert it’s value <em>after evaluating it</em>.</li>
<li><em>Note that when variable evaluation is “lazy” it will not occur until the variable is actually inserted into the document.</em></li>
<li>An exception to this is when an evaluation is forced, explicitly using <code>$eval</code> or <code>$seteval</code>, or implicitly when an inline function is used with <code>$set</code> or <code>$modify</code> (see above).</li>
<li>Functions can be invoked using “dot-notation”, e.g.:<br />
<code>$myname.uppercase</code> will invoke the <code>$uppercase</code> function and print the result. These may be cascaded as in:<br />
<code>$date.monthdate.lowercase</code></li>
<li>When dot-notation used with functions that take parameters, the parameters must be put in parenthesies, e.g.<br />
<code>$set $name=Peter</code><br />
<code>$name.uppercase.concat(" ").repeat(5)</code> <strong>⇒</strong> PETER PETER PETER PETER PETER </li>
<li>To a limited extent this can be used with user-written functions, e.g.</li></ul>
<pre>
  $welcome=\                               // function to add greeting and degree to the current result
    $copy $old_result=$result\
    $set $result="$greeting $old_result $degree!"
  $parameters $welcome greeting degree     // specify two parameters: greeting &amp; degree

  $name=Martin Smith                       // put a value into the name variable
  $name.welcome("Hi" "Ph.D.")              // run the function
  $name.welcome("Hello" "junior")
</pre>
<ul class="plainlist" style="list-style-type:none;"><li><strong>⇒</strong> 

Hi Martin Smith Ph.D.!</li>
<li><strong>⇒</strong> 

Hello Martin Smith junior!</li></ul>
<ul><li>The main limitation is that it is picky about not having whitespace before the closing “)”</li>
<li>Also, if a user-written function has no parameters, empty parenthesies must be used, e.g. <code>.myfunc()</code></li></ul>

<h4 id='block_variable_assignment'>4.1.4 Block variable assignment</h4>
<ul><li>Variables and function may be multi-line using the following syntax:</li></ul>
<pre>
 $nameofvar={
   multiple lines
 }
</pre>
<ul><li>It is possible to use this syntax for a single line, for example when a space must be included at the end of the variable, e.g.:
<div><code>[={$li_class1=done }</code></div></li>
<li>Note that block variable assigments should not be used for inline variables/functions since line-end characters will be included.
<ul><li>Instead, simply use continuation lines, e.g.:</li></ul></li></ul>
<pre>
 $longmonth=\
    $pushset $monthdatefmt="%A %B %-d"\
    $day.monthdate\
    $pop $monthdatefmt
</pre>

<h4 id='single_character_variables'>4.1.5 Single Character variables</h4>
<ul><li>One of the strengths of Writeup is the ability to define certain single characters as variables
<ul><li>They are the characters: <code>[ ] { }</code> which can be set individually</li>
<li>Plus the eight <em>alternating</em> characters: <code>~ @ # % ^ * _ `</code> which are used in matching pairs, e.g. <code>*boldly*</code></li></ul></li>
<li>These can be assigned simply by:</li></ul>
<p>(example needed)</p>
<ul><li class="newline">Note that as of Writeup version 2, you can only set the eight <em>alternating</em> characters inline if you use their long form. e.g.<br />
<code>$set ${:sAT}="Value of first \@" $set ${:eAT}="Value of alternating \@"</code><br />
resulting in <code>@--and--@</code> becoming: Value of first @—and—Value of alternating @</li>
<li class="newline">Here are the long forms of all the single character variables:
<div><code>$:sCURL</code> – <code>{</code> <code>$:eCURL</code> – <code>}</code> <code>$::CURL</code> – <code>{}</code></div>
<div><code>$:sSQR</code> – <code>[</code> <code>$:eSQR</code> – <code>]);  &lt;($::SQR</code> – <code>[]</code></div>
<div><code>$:sHASH</code> – <code>#</code> <code>$:eHASH</code> – <code>#</code> <code>$::HASH</code> – <code>#</code></div>
<div><code>$:sCIRC</code> – <code>^</code> <code>$:eCIRC</code> – <code>^</code> <code>$::CIRC</code> – <code>^</code></div>
<div><code>$:sPCENT</code> – <code>%</code> – <code>$:ePCENT</code> – <code>%</code> – <code>$::PCENT</code> – <code>%</code></div>
<div><code>$:sTILD</code> – <code>~</code> <code>$:eTILD</code> – <code>~</code> <code>$::TILD</code> – <code>~</code></div>
<div><code>$:sAT</code> – <code>@</code> <code>$:eAT</code> – <code>@</code> <code>$::AT</code> – <code>@</code></div>
<div><code>$:sTICK</code> – <code>`</code> <code>$:eTICK</code> – <code>`</code> <code>$::TICK</code> – <code>`</code></div>
<div><code>$:sASTR</code> – <code>&lt;strong&gt;</code> – <code>$:eASTR</code> – <code>&lt;/strong&gt;</code> – <code>$::ASTR</code> – <code>*</code></div>
<div><code>$:sUNDR</code> – <code>&lt;em&gt;    </code> – <code>$:eUNDR</code> – <code>&lt;/em&gt;    </code> – <code>$::UNDR</code> – <code>_</code></div></li></ul>

<h4 id='parentheses'>4.1.6 Parentheses</h4>
<ul><li>Parentheses can be used to evaluate an expression, e.g.</li></ul>
<table class="borders" style="table-layout: fixed; width:100%;"><colgroup><col /><col class="c40" /><col class="c40" /></colgroup>
<tr><th class="demo">Simple expression:
</th>
<td><pre>$( 1 $plus 1 $)</pre></td>
<td>
<p>2 </p>
</td></tr>
<tr><th class="demo">This is functionally identical to:
</th>
<td><pre>$set $result=1 $plus 1 $result</pre></td>
<td>
<p>2 </p>
</td></tr>
<tr><th class="demo">They are typically used for a temporary result:
</th>
<td><pre>$set $greet="Hello world!" $( $greet $whenunset "hi" $uppercase $)</pre></td>
<td>
<p>HELLO WORLD! </p>
</td></tr>
</table>

<h3 id='function_parameters_passing_arguments'>4.2 Function Parameters—passing arguments</h3>

<h4 id='the_parameter_list'>4.2.1 The Parameter List</h4>
<p>If a parameter list is defined with the same name as the function, then when the function is called, the values following the call will be parsed for arguments, up to the end of the line.</p>
<ul><li>The definition can be before or after the function. e.g.:</li></ul>
<pre>
$greet=Hi $fname, I see you are $salutation $lname now!  // define the function
$parameters $greet salutation fname lname                // define the parameters

// now call the function with some arguments:
$greet Dr. Andrew Fountain --How are you?
</pre>
<ul><li class="newline">The result is:</li></ul>
<table class="borders codeoutput"><tbody>
<tr>
<td><p class="codeoutput">Hi Andrew, I see you are Dr. Fountain now! —How are you?</p></td></tr>
</tbody></table>

<ul><li class="newline">There are four kinds of parameter:
<ul><li>single token (default)</li>
<li>variable name (the parameter name starts with <strong>$</strong>)</li>
<li>string up to the end of the line (the parameter name ends with <strong>line</strong>)
<ul><li>any subsequent argument processing will be advanced to the next line</li></ul></li>
<li>string up to the end of the line, non-zero length (the parameter name ends with <strong>linz</strong>)
<ul><li>a zero-length argument will not be accepted (so the default value is used if supplied)</li>
<li>if it is the only parameter on a line and the line is blank, argument processing will <em>not</em> be advanced to the next line</li></ul></li></ul></li>
<li class="newline">In the following example, the first parameter is a variable, the second and third are single tokens, and the last is the rest of line:</li></ul>
<pre>
$parameters $heading hlevel hclass $href hline // define parameters for $heading
$heading={&lt;h$hlevel class="$hclass"&gt;$hline&lt;/h$hlevel&gt; // heading of level hlevel &amp; class hclass
  $setval ${$href}=&lt;&lt;$hline&gt;&gt; // save title string in the address supplied by the argument href
}

// now call the function
$heading 2 content $htitle Testing out parameters
This is a paragraph about "$htitle"!
</pre>
<ul><li>The result is:</li></ul>
<table class="borders codeoutput"><tbody>
<tr>
<td><h2 class="content">Testing out parameters</h2>
<p>This is a paragraph about “«Testing out parameters»”!</p></td></tr>
</tbody></table>

<ul><li class="newline">Now the function is called with different arguments:</li></ul>
<pre>
$heading 3 comment $htitleb More testing of parameters
After hearing about "$htitle", this is a paragraph about "$htitleb"!
</pre>
<table class="borders codeoutput"><tbody>
<tr>
<td><h3 class="comment">More testing of parameters</h3>
<p>After hearing about “«Testing out parameters»”, this is a paragraph about “«More testing of parameters»”!</p></td></tr>
</tbody></table>


<h4 id='default_parameters'>4.2.2 Default Parameters</h4>
<p>Default parameter values are set up in the same way as parameters, e.g.</p>
<pre>
$parameters $heading_default 3 baseclass $hval "Default Title" // set defaults for $heading function
</pre>
<ul><li>Now if the <code>$heading</code> function is called with missing arguments, defaults will be used.
<ul><li>Note that the number of arguments supplied was available in <code>$heading_args</code>:</li></ul></li></ul>
<pre>
$heading
This is a paragraph about "$hval" but only $heading_args arguments were given!
</pre>
<table class="borders codeoutput"><tbody>
<tr>
<td><h3 class="baseclass">Default Title</h3>
<p>This is a paragraph about “«Default Title»” but only 0 arguments were given!</p></td></tr>
</tbody></table>


<h4 id='default_parameters_the_hard_way'>4.2.3 Default Parameters, the hard way</h4>
<p>An alternative way of checking parameters is to do it manually, e.g.</p>
<pre>
$parameters $func f0 f1 f2 fline
$parameters $func_default A B // only default the first two
$parameters $func f0 f1 f2 fline
$func={
  $modify $f2 $whenunset -noArg2- // manual default of the last two parameters
  $modify $fline $whenunset -noArg3-
Count=$func_param ($f0)($f1)($f2)($fline...
}
</pre>
<ul><li class="newline">Now four possible calls:</li></ul>
<pre>
$func a b c d e f
$func can't catch me for a toffee flea
$func a b
$func
</pre>
<ul><li>resulting in:</li></ul>
<table class="borders codeoutput"><tbody>
<tr>
<td><p>Count=4 (a)(b)(c)(d e f...</p>
<p>Count=4 (can’t)(catch)(me)(for a toffee flea...</p>
<p>Count=4 (a)(b)(-noArg2-)(-noArg3-...</p>
<p>Count=4 (A)(B)(-noArg2-)(-noArg3-...</p></td></tr>
</tbody></table>


<h4 id='parsing_arguments_manually'>4.2.4 Parsing Arguments manually</h4>
<pre>
$parameters $draw drawline
$draw={
  $set $explodedelim=" ,"
  $explode $arg $drawline
  $set $explodedelim=" "
Draw a "$( $arg2 $whenunset "thing" $)" at ($arg0, $arg1)
}
$draw 5, 6, office block
$draw 123,   678,    factory and industrial area
$draw 654,908,home
$draw 23,45
</pre>
<ul><li class="newline">resulting in:</li></ul>
<table class="borders codeoutput"><tbody>
<tr>
<td><p>Draw a “office block” at (5, 6)</p>
<p>Draw a “factory and industrial area” at (123, 678)</p>
<p>Draw a “home” at (654, 908)</p>
<p>Draw a “thing” at (23, 45)</p></td></tr>
</tbody></table>


<h4 id='example_of_multi_line_parameters'>4.2.5 Example of multi-line parameters</h4>
<ul><li>Declare a function that takes seven parameters:
<ul><li>three on the first line, the third taking the rest of the line</li>
<li>two on the second line, the second taking the rest of the line</li>
<li>then two full lines, both optional, defaulting to “f f f f” &amp; “g g g g”</li></ul></li></ul>
<pre>$parameters $f a b c_line d e_line f_linz g_linz</pre>
<pre>$parameters $f_default aaaa bbbb "c c c c" dddd "e e e e" "f f f f" "g g g g"</pre>
<ul><li>Note that it is a good idea to prevent multiple blank lines creating extra vertical space in the input by setting<br />
<code>$blanklines=</code></li>
<li>Now define the function to simply print a list of the arguments:</li></ul>
<pre>
$f={
-\$a=$a
-\$b=$b
-\$c_line=$c_line
-\$d=$d
-\$e_line=$e_line
-\$f_line=$f_linz
-\$g_linz=$g_linz
Last argument supplied was number $f_args
}
</pre>
<ul><li>Call the function with all arguments supplied:</li></ul>
<pre>
$f This is a multi-line function
with a second line
an optional third line
Plus an optional fourth line
</pre>
<table class="borders codeoutput"><tbody>
<tr>
<td><ul><li>$a=This</li>
<li>$b=is</li>
<li>$c_line=a multi-line function</li>
<li>$d=with</li>
<li>$e_line=a second line</li>
<li>$f_line=an optional third line</li>
<li>$g_linz=Plus an optional fourth line</li></ul>
<p>Last argument supplied was number 7</p></td></tr>
</tbody></table>

<ul><li>And again, but with arguments missing (and empty lines):</li></ul>
<pre>
$f Now just
"three arguments"

</pre>
<table class="borders codeoutput"><tbody>
<tr>
<td><ul><li>$a=Now</li>
<li>$b=just</li>
<li>$c_line=</li>
<li>$d=three arguments</li>
<li>$e_line=</li>
<li>$f_line=f f f f</li>
<li>$g_linz=g g g g</li></ul>
<p>Last argument supplied was number 5</p></td></tr>
</tbody></table>


<h3 id='flow_control'>4.3 Flow Control</h3>

<h4 id='if'>4.3.1 If</h4>
<pre class="indent">
$if &lt;condition&gt;
$elseif //optional elseif clause
$else //optional else clause
$endif</pre>
<ul><li class="newline">There are three other variants:
<ul><li><code>$ifdef &lt;variable_name&gt;</code> tests to see if variable is defined</li>
<li><code>$ifndef &lt;variable_name&gt;</code> converse of above</li>
<li><code>$ifexists &lt;file_name&gt;</code> the file name can be contained in a variable and can be absolute or relative to the directory of the <em>current</em> document.</li></ul></li>
<li>No looping is currently provided (although it can be effected using recursion)</li>
<li>There is a conditional statement: <code>$iftrue &lt;testvariable&gt; &lt;true-result&gt; &lt;false-result&gt;</code>. See <a href="#pre-defined_inline_functions">Pre-defined Inline Functions</a></li></ul>

<h4 id='include'>4.3.2 Include</h4>
<ul><li>Files may be included using the <code>$include &lt;filename&gt;</code> function
<ul><li>If the file is not found in the current directory, and not an absolute path, then its parent is searched, and so on, up to the root
<ul><li>(This enables include files to be stored in one place)</li>
<li>To prevent this search, use <code>$includex</code> (include e<u><strong>x</strong></u>act) instead</li></ul></li>
<li>If the filename includes a relative path, e.g. <code>includes/my_inc.txt</code> then a search will be performed in the order:
<ul><li><code>includes/my_inc.txt</code>, <code>../includes/my_inc.txt</code>, <code>../../includes/my_inc.txt</code> etc.</li></ul></li></ul></li>
<li>If there are no includes in the document, then Writeup will automatically add <code>$include top.txt</code> at the top of the document
<ul><li>To prevent this happening, the line <code>$include NONE</code> can be added</li></ul></li>
<li>The constant <code>$INCLUDED</code> is set to the current inclusion depth, where 0=top level. See <a href="#pre-defined_constants">Pre-defined constants</a>.</li></ul>

<h5 id='include_paths'>4.3.2.1 Include paths</h5>
<p>In order to help functions within <strong>include</strong> files to set up paths for other includes, css, javascript etc, the functions can find out information about how the file system is set up through the following variables:</p>
<ul><li><code>$INCLUDEPATH</code> contains the absolute path of the <em>current</em> file, including the final ‘/’
<ul><li>So if an included file is not contained in the current directory, the value of <code>$INCLUDEPATH</code> will be different to its value within the main document.</li>
<li>If you need to include a file from somewhere else in the file structure, This value can be set to a search base (i.e. the bottom of the tree, and search is upwards, however in most cases it would be better to use an absolute path.)</li></ul></li>
<li>From within an include file, <code>$RELPATH</code> gives the relative address of the main document (not including the final ‘/’)</li>
<li>From within an include file, <code>$REVERSEPATH</code> gives the relative address the main document would need to use to access the directory containing the include file
<ul><li>e.g. within an include file that is in the directory above the main file, <code>$REVERSEPATH</code> would be <code>..</code></li>
<li>The values of <code>$RELPATH</code> or <code>$REVERSEPATH</code> from the most recent include will still be availabe in the main document.
<ul><li>But if their values need to persist past other includes, they should be <code>$copy</code>‘ed into another variable.</li></ul></li>
<li>In Writeup 2.0 <code>$RELPATH</code> and <code>$REVERSEPATH</code> are set to <code>FALSE</code> if the included file is not in a directory that is a direct ancestor of the current directory. (This may change in future versions.)</li></ul></li></ul>

<h4 id='exit'>4.3.3 exit</h4>
<ul><li><code>$exit</code> will immediately abort. It can be in the middle of a line.
<ul><li>Writeup will attempt to close any open tags with no error messages.</li>
<li>If a warning message should be generated, then use <code>$warningmsg</code> before <code>$exit</code>.</li></ul></li></ul>

<h3 id='pre_defined_constants'>4.4 Pre-defined constants</h3>
<table class="borders">
<tr><th class="demo">Today’s date:
</th>
<td><code>$TODAY</code></td>
<td>2013-11-11 
</td></tr>
<tr><th class="demo">Title of document (usually from first line, or the command line but can be assigned):
</th>
<td><code>$TITLE</code></td>
<td>Writeup 2.5 Complete Reference Guide 
</td></tr>
<tr><th class="demo">Path of document, filename
<p>and filename with no extension:</p>
</th>
<td><code>$PATH, $FILENAME<span class="docNL">↵</span>
$FILE</code></td>
<td>/home/andrew/code/cpp/writeup/tests/, fullref.txt
<p>fullref </p>
</td></tr>
<tr><th class="demo">Type of document (writeup, inc or undefined):
</th>
<td><code>This document is of type "$TYPE"</code></td>
<td>This document is of type “writeup” 
</td></tr>
<tr><th class="demo">date and time of last change:
</th>
<td><code>$DATE -- $TIME</code></td>
<td>2013-10-22 – 01:23:45 
</td></tr>
<tr><th class="demo">Version of Writeup:
</th>
<td><code>$VERSION</code></td>
<td>2.5 
</td></tr>
<tr><th class="demo">Version string including date:
</th>
<td><code>$VERSTRING</code></td>
<td> 2.49.04 (2013-11-12) 
</td></tr>
<tr><th class="demo">Environment - Linux, Windows or MacOS:
</th>
<td><pre>$OS </pre></td>
<td>
<p>Linux  </p>
</td></tr>
<tr><th class="demo">Directory separator for current environment:
</th>
<td><pre>($DIRSEP)</pre></td>
<td>
<p>(/) </p>
</td></tr>
<tr><th class="demo">Extracting/Exporting is taking place (command line -x or -X):
</th>
<td><code>$EXTRACTING</code></td>
<td>FALSE 
</td></tr>
<tr><th class="demo">Depth at which this particular file is currently included in others (0=not included):
</th>
<td><code>This file is an include at level: $INCLUDED</code></td>
<td>This file is an include at level: 1 
</td></tr>
</table>

<h3 id='pre_defined_variables'>4.5 Pre-defined variables</h3>
<table class="borders" style="table-layout: fixed; width:100%;"><colgroup><col class="c35" /><col class="c20" /><col /></colgroup>
<tr><th> Description </th><th> Variable </th><th> Default Value </th></tr>
<tr><th class="demo">Value prepended to all href urls (unless starts with scheme, e.g. <code>http://</code> or “<code>:</code>” ):
</th>
<td><code>$hrefbase</code></td>
<td><code class="variable"> 
</code></td></tr>
<tr><th class="demo">Value prepended to all img src urls (unless starts with scheme, e.g. <code>http://</code> or “<code>:</code>” ):
</th>
<td><code>$imgbase</code></td>
<td><code class="variable"> 
</code></td></tr>
<tr><th class="demo">Override media type in link:
</th>
<td><code>$mediatype</code></td>
<td><code class="variable">-not set- 
</code></td></tr>
<tr><th class="demo">Doctype at top of document:
</th>
<td><code>$doctype</code></td>
<td><code class="variable">&lt;!DOCTYPE html&gt; 
</code></td></tr>
<tr><th class="demo">Style tag inserted into body (not header) of document, e.g. for email:
</th>
<td><code>$bodystyle</code></td>
<td><code class="variable"> 
</code></td></tr>
<tr><th class="demo">Delimiter used for <code>$explode</code> function (default to space):
</th>
<td><code>$explodedelim</code></td>
<td><code class="variable">  
</code></td></tr>
<tr><th class="demo">Delimiter used for <code>$implode</code> function (default to space):
</th>
<td><code>$implodedelim</code></td>
<td><code class="variable">  
</code></td></tr>
<tr><th class="demo">Replacement character used by <code>$replacetext</code> function:
</th>
<td><code>$replacechar</code></td>
<td><code class="variable">= 
</code></td></tr>
<tr><th class="demo">Replacement character used by <code>$replacespaces</code> function (default to space):
</th>
<td><code>$replacespacechar</code></td>
<td><code class="variable">_ 
</code></td></tr>
<tr><th class="demo">Default date format used by <code>$monthdate</code> function:
</th>
<td><code>$monthdatefmt</code></td>
<td><code class="variable">%Eb %-d 
</code></td></tr>
<tr><th class="demo">Default date format used by <code>$yeardate</code> function:
</th>
<td><code>$yeardatefmt</code></td>
<td><code class="variable">%Eb %-d, %Y 
</code></td></tr>
<tr><th class="demo">Default date format used by <code>$customdate</code> function:
</th>
<td><code>$customdatefmt</code></td>
<td><code class="variable">%Ea %Eb %-d, %Y 
</code></td></tr>
<tr><th class="demo">Default newline representation in documentation <code>\n</code> character:
</th>
<td><code>$docNL</code></td>
<td><code class="variable">&lt;span class="docNL"&gt;↵&lt;/span&gt; 
</code></td></tr>
<tr><th class="demo">The character produced from: <code>\ </code>, an escaped space :
</th>
<td><code>($escspace)</code></td>
<td>( ) 
</td></tr>
<tr><th class="demo">Replace tabs in the input with this string :
</th>
<td><code>($tabreplace)</code></td>
<td>( ) 
</td></tr>
<tr><th class="demo">As above, but at start of line :
</th>
<td><code>($tabstartreplace)</code></td>
<td>( ) 
</td></tr>
<tr><th class="demo">If set, undefined variables are replaced with this value :
</th>
<td><code>$set $defaultval=D ($newvar) $unset $defaultval</code></td>
<td>(D) 
</td></tr>
<tr><th class="demo">Default attributes for <code>&lt;style&gt;</code> tags in header:
</th>
<td><code>$style_attr</code></td>
<td><code class="variable">type="text/css" 
</code></td></tr>
<tr><th class="demo">Default attributes for <code>&lt;script&gt;</code> tags in header:
</th>
<td><code>$script_attr</code></td>
<td><code class="variable">type="text/javascript" 
</code></td></tr>
<tr><th class="demo">Default <code>&lt;style&gt;</code> tag for page:
</th>
<td><code>$style</code></td>
<td><code class="variable">table.borders {border-width: 2px; border-spacing:2px; border-style:outset; border-color:gray;}
table.borders th, table.borders td {border-width:1px; padding:1px 5px; border-style:inset; vertical-align:top;}
table.borders th {background-color:#DDD;}
table.borders tbody th {text-align:left;}
table.borders p, table.borders ul, table.borders ol {margin-top:0; margin-bottom:0;}
h1 {color:darkblue; border-bottom:solid windowtext 1.0pt; padding:0in 0in 1.0pt 0in;}
div.indent {margin-left:40px;}
ul.plainlist {list-style-type:none;}
 
</code></td></tr>
<tr><th class="demo">Default CSS to create a page break:
</th>
<td><code>$pagebreakstyle</code></td>
<td><code class="variable">page-break-before:always; margin-top:0; 
</code></td></tr>
<tr><th class="demo">A blank line causes this class to be set on the next list item:
</th>
<td><code>$linespaceclass</code></td>
<td><code class="variable">newline 
</code></td></tr>
<tr><th class="demo">Multiple blank line handling.
<ul><li><code>$blanklines=TRUE</code> default handling</li>
<li><code>$blanklines=FALSE</code> supress blank line handling</li>
<li><code>$blanklines=</code><em>custom handler</em> where # of lines is passed in <code>$blanklinecount</code>:</li></ul>
</th>
<td><code>$blanklines</code></td>
<td><code class="variable">TRUE 
</code></td></tr>
<tr><th class="demo">If this is set, it’s contents are appended to the document:
</th>
<td><code>$postamble</code></td>
<td><code class="variable"> 
</code></td></tr>
<tr><th class="demo">Author (must be set by user):
</th>
<td><pre>default value: $author </pre></td>
<td>
<p>default value: unknown author  </p>
</td></tr>
<tr><th class="demo">Date format of <code>&lt;time&gt;</code> title attribute:
</th>
<td><code>Default: ($timetag_title)</code></td>
<td>Default: (%Eb %-d, %Y) 
</td></tr>
<tr><th class="demo">Overrides default calculation precision for floating point numbers:
</th>
<td><code>$floatprecision</code></td>
<td><code class="variable">-not set- 
</code></td></tr>
<tr><th class="demo">Same as setting <code>--body</code> option on command line:
</th>
<td><code>$OPT_body</code></td>
<td><code class="variable">-not set- 
</code></td></tr>
<tr><th class="demo">Same as setting <code>--process</code> option on command line:
</th>
<td><code>$OPT_process</code></td>
<td><code class="variable">-not set- 
</code></td></tr>
<tr><th class="demo">Same as setting <code>--markdown</code> option on command line:
</th>
<td><code>$OPT_markdown</code></td>
<td><code class="variable">-not set- 
</code></td></tr>
<tr><th class="demo">Same as setting <code>--github</code> option on command line:
</th>
<td><code>$OPT_github</code></td>
<td><code class="variable">-not set- 
</code></td></tr>
<tr><th class="demo">Equivalent to setting <code>--verbose</code> option on command line:
<p><strong>-3</strong> = (-qqq) show only fails</p>
<p><strong>-2</strong> = (-qq) show only errors</p>
<p><strong>-1</strong> = (-q) show only warnings &amp; errors</p>
<p><strong> 0</strong> = default</p>
<p><strong> 1</strong> = (-v) verbose</p>
<p><strong> 2</strong> = (-vv) very verbose</p>
<p><strong> 3</strong> = (-vvv) garrulous)</p>
<p><strong> 5+</strong> = (--debug):</p>
</th>
<td><code>$OPT_verbose</code></td>
<td><code class="variable">-1 
</code></td></tr>
</table>

<h4 id='url_root_and_base_values'>4.5.1 URL root and base values</h4>
<p>There are three kinds of URL:</p>
<ul><li>Relative, as in <a href="mylink">mylink</a></li>
<li>Root-relative, as in <a href="/home/mylink">/home/mylink</a> where the url starts with <code>/</code></li>
<li>Absolute, as in <a href="http://writeup.org/home/mylink">http://writeup.org/home/mylink</a> where the url starts with a scheme, e.g. <code>http://</code></li></ul>
<p>It is common to test a page on one site, but move in into production on another. To facilitate this, the variables <code>$hrefroot</code> or <code>$imgroot</code> are automatically prepended to <em>root-relative</em> url’s.</p>
<ul><li>This effect may be supressed and the url fixed by putting a <code>:</code> at the start of the url</li></ul>
<table class="borders headboth"><thead>
<tr>
<th>Effect of setting: </th>
<th>Relative  </th>
<th>Root-relative </th>
<th>Absolute </th>
<th>Fixed </th></tr>
</thead><tbody>
<tr>
<th><code>$hrefroot</code><br />= ‘’ </th>
<td><code>&lt;^about^&gt;</code><br /> ⇒ <a href="about">about</a> </td>
<td><code>&lt;^/about^&gt;</code><br />⇒ <a href="/about">/about</a> </td>
<td><code>&lt;^http://writeup.org/about^&gt;</code><br />⇒ <a href="http://writeup.org/about">http://writeup.org/about</a> </td>
<td><code>&lt;^:/about^&gt;</code><br />⇒ <a href="/about">/about</a> </td></tr>
<tr>
<th><code>$hrefroot</code><br />= ‘http://drup.org’ </th>
<td><code>&lt;^about^&gt;</code><br /> ⇒ <a href="about">about</a> </td>
<td><code>&lt;^/about^&gt;</code><br />⇒ <a href="http://drup.org/about">http://drup.org/about</a> </td>
<td><code>&lt;^http://writeup.org/about^&gt;</code><br />⇒ <a href="http://writeup.org/about">http://writeup.org/about</a> </td>
<td><code>&lt;^:/about^&gt;</code><br />⇒ <a href="/about">/about</a> </td></tr>
</tbody></table>

<ul><li class="newline">Image urls can be controlled in the same way using <code>$imgroot</code></li>
<li>Often images are stored in an images folder and this can be specified using <code>$imgbase</code> which will be prepended to relative url’s only.
<ul><li>If after adding <code>$imgbase</code> the url becomes root-relative, then as expected, <code>$imgroot</code> will also be prepended.</li></ul></li></ul>
<table class="borders headboth"><thead>
<tr>
<th>Effect of setting: </th>
<th>Relative  </th>
<th>Root-relative (Absolute &amp; Fixed are unchanged) </th></tr>
</thead><tbody>
<tr>
<th><code>$imgroot</code>=””<br /> <code>$imgbase</code>=”” </th>
<td><code>&lt;#pic.jpg#&gt;</code><br /> ⇒ &lt;img src=“pic.jpg” /&gt;<!--<img src="pic.jpg" alt="image: pic.jpg" />--> </td>
<td><code>&lt;#/pic.jpg#&gt;</code><br />⇒ &lt;img src=”/pic.jpg” /&gt;<!--<img src="/pic.jpg" alt="image: pic.jpg" />--> </td></tr>
<tr>
<th><code>$imgroot</code>=“http://drup.org”<br /> <code>$imgbase</code>=”” </th>
<td><code>&lt;#pic.jpg#&gt;</code><br /> ⇒ &lt;img src=“pic.jpg” /&gt;<!--<img src="pic.jpg" alt="image: pic.jpg" />--> </td>
<td><code>&lt;#/pic.jpg#&gt;</code><br />⇒ &lt;img src=“http://drup.org/pic.jpg” /&gt;<!--<img src="http://drup.org/pic.jpg" alt="image: pic.jpg" />--> </td></tr>
<tr>
<th><code>$imgroot</code>=””<br /> <code>$imgbase</code>=“myimages/” </th>
<td><code>&lt;#pic.jpg#&gt;</code><br /> ⇒ &lt;img src=“myimages/pic.jpg” /&gt;<!--<img src="myimages/pic.jpg" alt="image: pic.jpg" />--> </td>
<td><code>&lt;#/pic.jpg#&gt;</code><br />⇒ &lt;img src=”/pic.jpg” /&gt;<!--<img src="/pic.jpg" alt="image: pic.jpg" />--> </td></tr>
<tr>
<th><code>$imgroot</code>=“http://drup.org”<br /> <code>$imgbase</code>=“myimages/” </th>
<td><code>&lt;#pic.jpg#&gt;</code><br /> ⇒ &lt;img src=“myimages/pic.jpg” /&gt;<!--<img src="myimages/pic.jpg" alt="image: pic.jpg" />--> </td>
<td><code>&lt;#/pic.jpg#&gt;</code><br />⇒ &lt;img src=“http://drup.org/pic.jpg” /&gt;<!--<img src="http://drup.org/pic.jpg" alt="image: pic.jpg" />--> </td></tr>
<tr>
<th><code>$imgroot</code>=“http://drup.org”<br /> <code>$imgbase</code>=”/images/” </th>
<td><code>&lt;#pic.jpg#&gt;</code><br /> ⇒ &lt;img src=“http://drup.org/images/pic.jpg” /&gt;<!--<img src="http://drup.org/images/pic.jpg" alt="image: pic.jpg" />--> </td>
<td><code>&lt;#/pic.jpg#&gt;</code><br />⇒ &lt;img src=“http://drup.org/pic.jpg” /&gt;<!--<img src="http://drup.org/pic.jpg" alt="image: pic.jpg" />--> </td></tr>
</tbody></table>

<ul><li class="newline">Notes:
<ul><li><code>$hrefbase</code> works similarly to <code>$imgbase</code> but there are very few use cases for it</li>
<li><code>$hrefroot</code> and  <code>$imgroot</code> should <em>never</em> end in a <code>/</code><br />
-<code>$hrefbase</code> and  <code>$imgbase</code> will <em>always</em> end in a <code>/</code></li></ul></li></ul>

<h3 id='switches'>4.6 Switches</h3>
<p>Note that all of these switches except <code>$noerrors</code> can have a “1” suffixed to them to make them one time only.</p>
<ul><li>e.g. <code>$tableclasses1=TRUE</code> will only affect the next table. The variable will then self-delete.</li></ul>
<table class="borders" style="table-layout: fixed; width:100%;"><colgroup><col class="c35" /><col class="c20" /><col /></colgroup>
<tr><th> Description </th><th> Variable </th><th> Effect </th></tr>
<tr><th class="demo"><code>$smartquotes</code> If FALSE, smart quote conversion disabled (and also double hyphen)
<p>Default to TRUE:</p>
</th>
<td><code>'single'--"double" -- &lt;&lt;angle&gt;&gt; $set $smartquotes=FALSE 'single'--"double" -- &lt;&lt;angle&gt;&gt; $set $smartquotes=TRUE</code></td>
<td>‘single’—“double” – «angle» 'single'--"double" -- &lt;&lt;angle&gt;&gt; 
</td></tr>
<tr><th class="demo"><code>$tableclasses</code> If TRUE then automatic classes are set on all <code>&lt;tr&gt;</code>, <code>&lt;th&gt;</code> &amp; <code>&lt;td&gt;</code> tags in tables.
<p>Default to FALSE:</p>
</th>
<td><pre>----t<span class="docNL">↵</span>
$set $tableclasses=TRUE <span class="docNL">↵</span>
| tr.row1 th.col1 | tr.row1 th.col2 |<span class="docNL">↵</span>
| tr.row2 td.col1 | tr.row2 td.col2 |<span class="docNL">↵</span>
----<span class="docNL">↵</span>
</pre></td>
<td>
<table class="borders headtop"><thead>
<tr class="row1">
<th class="col1">tr.row1 th.col1 </th>
<th class="col2"> tr.row1 th.col2 </th></tr>
</thead><tbody>
<tr class="row2">
<td class="col1">tr.row2 td.col1 </td>
<td class="col2"> tr.row2 td.col2 </td></tr>
</tbody></table>

</td></tr>
<tr><th class="demo"><code>$listclasses</code> If TRUE then automatic classes are set on all <code>&lt;ol&gt;</code>, <code>&lt;ul&gt;</code>, <code>&lt;li&gt;</code> &amp; <code>&lt;div&gt;</code> tags in lists.
<p>Default to FALSE:</p>
</th>
<td><pre>$set $listclasses=TRUE <span class="docNL">↵</span>
-ul.ul1 li.ul1<span class="docNL">↵</span>
 -ul.ul2 li.ul2<span class="docNL">↵</span>
 a. ol.ol2 li.ol2<span class="docNL">↵</span>
 b. li.ol2<span class="docNL">↵</span>
  -ul.ul3 li.ul3<span class="docNL">↵</span>
   cl3<span class="docNL">↵</span>
 c. li.ol2<span class="docNL">↵</span>
   ul.pl3 li.pl3</pre></td>
<td>
<ul class="ul1"><li class="ul1">ul.ul1 li.ul1
<ul class="ul2"><li class="ul2">ul.ul2 li.ul2</li></ul>
<ol class="ol2" type="a" style="list-style-type:lower-alpha;"><li class="ol2">ol.ol2 li.ol2</li>
<li class="ol2">li.ol2
<ul class="ul3"><li class="ul3">ul.ul3 li.ul3
<div class="cl3">cl3</div></li></ul></li>
<li class="ol2">li.ol2
<ul class="plainlist pl3" style="list-style-type:none;"><li class="pl3">ul.pl3 li.pl3 </li></ul></li></ol></li></ul>
</td></tr>
<tr><th class="demo"><code>$noerrors</code> If TRUE then all error reporting is supressed.
<p>Default to FALSE:</p>
</th>
<td><pre>$set $noerrors=TRUE <span class="docNL">↵</span>
unchecked code<span class="docNL">↵</span>
$set $noerrors=FALSE</pre></td>
<td>
<p>unchecked code</p>
</td></tr>
<tr><th class="demo"><code>$compacttables</code> If TRUE then paragraph tags in table cells are not generated.
<p>Default to FALSE. (Note that cells generated using the </p>
<p><code>| cell1 | cell2 | etc...</code> shorthand will <em>always</em> be compact):</p>
</th>
<td><pre>$set $compacttables=TRUE <span class="docNL">↵</span>
----<span class="docNL">↵</span>
cell has no paragraph tag <span class="docNL">↵</span>
----</pre></td>
<td>
<table class="borders headnone"><tbody>
<tr>
<td>cell has no paragraph tag </td></tr>
</tbody></table>

</td></tr>
<tr><th class="demo"><code>$autolinks</code> If TRUE then <a href="http://xx.yy">xx.yy</a> is converted into a link.
<p>Default to TRUE:</p>
</th>
<td><pre>Converted to link: http://gw.ca<span class="docNL">↵</span>
$set $autolinks=FALSE <span class="docNL">↵</span>
not converted: http://gw.ca</pre></td>
<td>
<p>Converted to link: <a href="http://gw.ca">gw.ca</a></p>
<p>not converted: http://gw.ca </p>
</td></tr>
<tr><th class="demo"><code>$autolinkslen</code> Links longer than this are displayed abbreviated if possible
<p>Default to 30:</p>
</th>
<td><pre>The link: http://gw.ca/content/long-link/goes-on?q=with%20arguments is abbreviated.</pre></td>
<td>
<p>The link: <a href="http://gw.ca/content/long-link/goes-on?q=with%20arguments">gw.ca/…ntent/long-link/goes-on</a> is abbreviated. </p>
</td></tr>
<tr><th class="demo"><code>$forcelista</code> If TRUE then alphabetic lists do not have to be started at the beginning.
<p>(This is usually FALSE to prevent acronyms accidentally starting lists:</p>
</th>
<td><pre>$set $forcelista1=TRUE <span class="docNL">↵</span>
H. G. Wells is now an alphabetic list item "H."<span class="docNL">↵</span>
#. List continues.</pre></td>
<td>
<ol type="A" style="list-style-type:upper-alpha;"><li value="8">G. Wells is now an alphabetic list item “H.”</li>
<li>List continues. </li></ol>
</td></tr>
<tr><th class="demo"><code>$forcelisti</code> If TRUE then Roman numeral lists do not have to be started at the beginning.
<p>(This is usually FALSE to prevent acronyms accidentally starting lists:</p>
</th>
<td><pre>$set $forcelisti1=TRUE <span class="docNL">↵</span>
MCMXCIX. This is list item 1999.<span class="docNL">↵</span>
#. Next list value is 2000.</pre></td>
<td>
<ol style="margin-left:50px; padding-left:50px;" type="I" style="list-style-type:upper-roman;"><li value="1999">This is list item 1999.</li>
<li>Next list value is 2000. </li></ol>
</td></tr>
<tr><th class="demo"><code>$autoclose</code> If TRUE then any open tags will automatically be closed at the end of the block:
</th>
<td><pre>$set $autoclose1=TRUE opened &lt;mark&gt;but not closed</pre></td>
<td>
<p>opened <mark>but not closed </mark></p>
</td></tr>
<tr><th class="demo"><code>$timetag</code> If TRUE (default value) then dates will be displayed using the <code>&lt;time&gt;</code> tag:
</th>
<td><pre>$set $timetag1=TRUE $( $TODAY $yeardate $)</pre></td>
<td>
<p><time datetime="2013-11-11" title="Nov 11, 2013">Nov 11, 2013</time> </p>
</td></tr>
<tr><th class="demo"><code>$emailhide</code> If TRUE (default value) then <code>mailto:</code> email addresses will be ‘hidden’ using numeric entities:
</th>
<td><code>$set $emailhide=TRUE [[mailto:a@gw.ca]]</code></td>
<td><a href="m&#x0061;&#x69;&#0108;&#116;&#0111;&#x003A;a&#x40;&#x67;w&#046;&#099;&#97;">&#97;&#64;&#x0067;&#119;&#x2E;&#x63;&#097;</a> 
</td></tr>
<tr><th class="demo"><code>$plainlists</code> If TRUE then plain lists (no bullet or number) are allowed.:
</th>
<td><code>Defaults to: $plainlists. See [[#lists lists]] for an example.</code></td>
<td>Defaults to: TRUE. See <a href="#lists">lists</a> for an example. 
</td></tr>
</table>

<h3 id='pre_defined_inline_functions'>4.7 Pre-defined Inline Functions</h3>

<h4 id='variable_handling'>4.7.1 Variable handling</h4>
<ul><li class="newline">These functions can be placed inline anywhere.</li>
<li>All <code class="variable">values</code> can be delimited by spaces, <code>"</code>, <code>'</code>, <code>:</code> or <code>/</code></li>
<li>The first five functions, marked <span class="red">§</span> have the following side effect:
<ul><li>They set their first parameter to be the “current variable”, for use with functions like <code>$plus</code></li></ul></li>
<li>The functions marked <span class="blue">‡</span> have the side effect of triggering a constructor if one has been defined</li>
<li>In the examples below, the result of the operation is often shown in (parenthesis). They have no function apart from clearly marking out the result.</li></ul>
<table class="borders" style="table-layout: fixed; width:100%;">
<colgroup><col span="3" class="c25" /><col /></colgroup>
<tr><th> Description </th><th>Syntax</th><th>Example</th><th>Result</th></tr>
<tr><th class="demo"><span class="red">§</span><span class="blue">‡</span>Puts <code>value</code> into <code>$var</code>:
</th>
<td><code class="variable">$set $var=value</code></td>
<td><code>$set $num=65536 Resulting in ($num) </code></td>
<td>Resulting in (65536) 
</td></tr>
<tr><th class="demo">  …example with a <code>'</code> delimiter:
</th>
<td><code class="variable">$set $var=delimitedvalue</code></td>
<td><code>$set $var='a phrase' Resulting in ($var) </code></td>
<td>Resulting in (a phrase) 
</td></tr>
<tr><th class="demo"><span class="red">§</span><span class="blue">‡</span>Same as <code>$set</code> but copies contents:
</th>
<td><code class="variable">$copy $var2=$var1</code></td>
<td><code>$copy $cp=$var Resulting in ($cp) </code></td>
<td>Resulting in (a phrase) 
</td></tr>
<tr><th class="demo"><span class="blue">‡</span>Same as <code>$set</code> but value is delimited by end of line:
</th>
<td><code class="variable">$setline $var=rest of line</code></td>
<td><code>$setline $var=rest of line<span class="docNL">↵</span><br />Resulting in ($var)</code></td>
<td>Resulting in (rest of line)</td></tr>
<tr><th class="demo"><span class="red">§</span><span class="blue">‡</span>Same as <code>$set</code> but evaluates expressions immediately rather than doing lazy evaluation :
</th>
<td><code class="variable">$setval "expression"</code></td>
<td><code>$setval $em_title1="em:$( $num $plus 1 $)" _hover over me_</code></td>
<td><em title="em:65537">hover over me</em>
</td></tr>
<tr><th class="demo">…and is implicitly terminated if begins with <code>$(</code> :
</th>
<td><code class="variable">$setval $( expression $) </code></td>
<td><code>$setval $halfnum=$( $num $div 2 $) ($halfnum)</code></td>
<td>(32768)
</td></tr>
<tr><th class="demo"><span class="red">§</span>Makes into the “current variable” for modification:
</th>
<td><code class="variable">$modify($var) or $modify $var</code></td>
<td><code>$modify($num).div( 32 ) now:$num and <span class="docNL">↵</span>
$modify $num $div 32 now:$num</code></td>
<td>now:2048 and 
<p>now:64</p>
</td></tr>
<tr><th class="demo">“Explodes” value into array
<p>Count returned in array name</p>
<p>Array members start at zero:</p>
</th>
<td><code class="variable">$explode $arrayname=values </code></td>
<td><code>$explode $ar=$var ($ar $ar0 $ar1 $ar2)</code></td>
<td>(3 rest of line)
</td></tr>
<tr><th class="demo"><span class="blue">‡</span>Same as <code>$explode</code> but value is delimited by end of line:
</th>
<td><code class="variable">$explodeline $arrayname=word word word…</code></td>
<td><code>$explodeline $ar=Line of text<span class="docNL">↵</span><br />Resulting in ($ar $ar0 $ar1 $ar2)</code></td>
<td>Resulting in (3 Line of text)</td></tr>
<tr><th class="demo">“Implodes” array into value:
</th>
<td><code class="variable">$implode $string=$arrayname </code></td>
<td><code>$implode $s=$ar ($s)</code></td>
<td>(Line of text)
</td></tr>
<tr><th class="demo">Removes a variable or function:
</th>
<td><code class="variable">$unset $var</code></td>
<td><code>$unset $var2</code></td>
<td>
</td></tr>
<tr><th class="demo">Push variable onto the stack:
</th>
<td><code class="variable">$push $var</code></td>
<td><code>$push $s</code></td>
<td>
</td></tr>
<tr><th class="demo">Pop variable off stack:
</th>
<td><code class="variable">$pop $var</code></td>
<td><code>$pop $new ($new)</code></td>
<td>(Line of text)
</td></tr>
<tr><th class="demo">Push variable onto the stack and set a new value. (Shorthand for <code>$push</code> then <code>$set</code>):
</th>
<td><code class="variable">$pushset $var=value</code></td>
<td><code>$pushset $s="new string"<span class="docNL">↵</span><br />($s) $pop $s ($s)</code></td>
<td>(new string) (Line of text)</td></tr>
<tr><th class="demo">If current variable not set, replace with value:
</th>
<td><code class="variable">$whenunset value</code></td>
<td><code>$( $newval $whenunset 777 $)</code></td>
<td>777
</td></tr>
<tr><th class="demo">Evaluate contents of current variable:
</th>
<td><code class="variable">$eval</code></td>
<td><code>$set $y='$( 7 $plus 8 $)' $eval ($y)</code></td>
<td>(15)
</td></tr>
<tr><th class="demo">Conditional statement:
</th>
<td><code class="variable">$iftrue $testvariable true-result false-result</code></td>
<td><code>$iftrue $s "s=$s " "s is FALSE"</code></td>
<td>s=Line of text 
</td></tr>
<tr><th class="demo">Dereference variable:
</th>
<td><code class="variable">$deref</code></td>
<td><code>$set $y="$empty" $( $y $deref $whenunset is-empty $) </code></td>
<td>is-empty 
</td></tr>
</table>

<h4 id='numeric_functions'>4.7.2 Numeric Functions</h4>
<table class="borders" style="table-layout: fixed; width:100%;">
<colgroup><col span="3" class="c25" /><col /></colgroup>
<tr><th> Description </th><th>Syntax</th><th>Example</th><th>Result</th></tr>
<tr><th class="demo">add value to the current variable       :
</th>
<td><code class="variable">$plus $var</code></td>
<td><code>$( 2.5 $plus 1.5 $)</code></td>
<td>4
</td></tr>
<tr><th class="demo">subtract value from the current variable:
</th>
<td><code class="variable">$minus $var</code></td>
<td><code>$( 2.5 $minus 1.5 $)</code></td>
<td>1
</td></tr>
<tr><th class="demo">multiple value with the current variable:
</th>
<td><code class="variable">$mult $var</code></td>
<td><code>$( 2.5 $mult 1.5 $)</code></td>
<td>3.75
</td></tr>
<tr><th class="demo">divide value into the current variable  :
</th>
<td><code class="variable">$div $var</code></td>
<td><code>$( 25 $div 1.5 $)</code></td>
<td>16.6667
</td></tr>
<tr><th class="demo">divide value into the current variable rounding to nearest integer:
</th>
<td><code class="variable">$idiv $var</code></td>
<td><code>$( 25 $idiv 1.5 $)</code></td>
<td>17
</td></tr>
<tr><th class="demo">fix the current variable at a given number of decimal places (see also <code>$floatprecision</code>):
</th>
<td><code class="variable">$fixdecimals $var</code></td>
<td><code>$( 2.5 $fixdecimals 2 $)</code></td>
<td>2.50
</td></tr>
</table>

<h4 id='text_processing_functions'>4.7.3 Text processing Functions</h4>
<table class="borders" style="table-layout: fixed; width:100%;">
<colgroup><col span="3" class="c25" /><col /></colgroup>
<tr><th> Description </th><th>Syntax</th><th>Example</th><th>Result</th></tr>
<tr><th class="demo">Concatenate value with current variable (can be quote delimited):
</th>
<td><code class="variable">$concat value</code></td>
<td><code>$set $v=Paul $( Andrew $concat "&amp; $v" $) </code></td>
<td>Andrew&amp; Paul 
</td></tr>
<tr><th class="demo">Same as <code>$concat</code> but does any variable subsitituion first:
</th>
<td><code class="variable">$concatv value</code></td>
<td><code>$set $v=Paul $( Andrew $concatv "&amp; $v" $) </code></td>
<td>Andrew&amp; Paul 
</td></tr>
<tr><th class="demo">Replace all text with <code>$replacechar</code> character<br />(Used for underlining):
</th>
<td><code class="variable">$replacetext</code></td>
<td><code>$( "Don't Bother!" $replacetext $) </code></td>
<td>============= 
</td></tr>
<tr><th class="demo">Convert current variable to upper case:
</th>
<td><code class="variable">$uppercase</code></td>
<td><code>$( "Don't Bother!" $uppercase $) </code></td>
<td>DON’T BOTHER! 
</td></tr>
<tr><th class="demo">Convert current variable to lower case:
</th>
<td><code class="variable">$lowercase</code></td>
<td><code>$( "Don't Bother!" $lowercase $) </code></td>
<td>don’t bother! 
</td></tr>
<tr><th class="demo">Replace spaces with <code>$replacespacechar</code> character:
</th>
<td><code class="variable">$replacespaces</code></td>
<td><code>$( "Don't Bother!" $replacespaces $) </code></td>
<td>Don’t_Bother! 
</td></tr>
<tr><th class="demo">Remove punctuation from current variable:
</th>
<td><code class="variable">$removepunct</code></td>
<td><code>$( "Don't Bother!" $removepunct $) </code></td>
<td>Dont Bother 
</td></tr>
<tr><th class="demo">Strip HTML from current variable:
</th>
<td><code class="variable">$striphtml</code></td>
<td><code>$( "&lt;b&gt;a long &lt;br /&gt;_long_ time&lt;/b&gt;" $striphtml $) </code></td>
<td>a long long time 
</td></tr>
<tr><th class="demo">A combination of the last four operations can be used to generate an ID or URL:
</th>
<td><code class="variable">$lowercase $striphtml $removepunct $replacespaces</code></td>
<td><code>$( "Don't Bother!" $lowercase $striphtml $removepunct $replacespaces $) </code></td>
<td>dont_bother 
</td></tr>
<tr><th class="demo">Ensure special characters are interpreted literally, but allow variables:
</th>
<td><code class="variable">$litspecialchars</code></td>
<td><code>$( ^%~@*_`{}[]&amp;#x2611;$v $litspecialchars $)</code></td>
<td>^%~@*_`{}[]&amp;#x2611;Paul
</td></tr>
<tr><th class="demo">For documentation purposes ensure <code>&lt;</code> <code>&gt;</code> and <code>&amp;</code> print literally:
</th>
<td><code class="variable">$litdoc</code></td>
<td><code>$( &lt;s&gt;&amp;#x2611;$v&lt;/s&gt; $litdoc $)</code></td>
<td>&lt;s&gt;&amp;#x2611;$v&lt;/s&gt;
</td></tr>
<tr><th class="demo">Text is encoded to ensure that <em>no</em> substitution occurs, usually for code:
</th>
<td><code class="variable">$litcode</code></td>
<td><code>$( &lt;s&gt;{&amp;#x2611;$v}&lt;/s&gt; $litcode $)</code></td>
<td><s>{&#x2611;$v}</s>
</td></tr>
<tr><th class="demo">Remove following character if a space (useful within functions):
</th>
<td><code class="variable">$nosp</code></td>
<td><code>abcd$nosp efgh</code></td>
<td>abcdefgh
</td></tr>
</table>

<h4 id='timedate_processing_functions'>4.7.4 Time/Date processing Functions</h4>
<p>These functions allow variables of the date type “date” to be manipulated and displayed.</p>
<ul><li>A date variable is simply a string of the form yyyy-mm-dd (ISO standard format) and may be created displayed with no special functions.</li>
<li>The date can be converted to another format using the <a href="http://www.cplusplus.com/reference/clibrary/ctime/strftime/">C++ strftime specification</a> of which a simplified summary is:</li></ul>
<table class="borders headboth"><thead>
<tr>
<th>Using dates </th>
<th>Examples below based on: 2012-02-05T09:23:45 – 2018-07-19T13:45:00 </th></tr>
</thead><tbody>
<tr>
<th>Year </th>
<td> <span class="red">%Y</span>→<strong>2012</strong>–<strong>2018</strong>  <span class="red">%y</span>→<strong>12</strong>–<strong>18</strong></td></tr>
<tr>
<th>Month </th>
<td> <span class="red">%B</span>→<strong>February</strong>–<strong>July</strong>  <span class="red">%Eb</span>→<strong>Feb</strong>–<strong>July</strong>  <span class="red">%b</span>→<strong>Feb</strong>–<strong>Jul</strong>  <span class="red">%m</span>→<strong>02</strong>–<strong>07</strong>  <span class="red">%-m</span>→<strong>2</strong>–<strong>7</strong></td></tr>
<tr>
<th>Day of month </th>
<td> <span class="red">%d</span>→<strong>05</strong>–<strong>19</strong>  <span class="red">%-d</span>→<strong>5</strong>–<strong>19</strong>  <span class="red">%e</span>→<strong> 5</strong>–<strong>19</strong> (leading space) </td></tr>
<tr>
<th>Day of week </th>
<td> <span class="red">%A</span>→<strong>Sunday</strong>–<strong>Thursday</strong>  <span class="red">%Ea</span>→<strong>Sun</strong>–<strong>Thurs</strong>  <span class="red">%a</span>→<strong>Sun</strong>–<strong>Thu</strong>  <span class="red">%w</span>→<strong>0</strong>–<strong>4</strong> (<span class="red">%u</span> not supported by MS) </td></tr>
<tr>
<th>Hour </th>
<td> <span class="red">%H</span>→<strong>09</strong>–<strong>13</strong>  <span class="red">%I%P</span>→<strong>09am</strong>–<strong>01pm</strong>  <span class="red">%-I%P</span>→<strong>9am</strong>–<strong>1pm</strong>  <span class="red">%l%p</span>→<strong> 9AM</strong>–<strong> 1PM</strong> (leading space) </td></tr>
<tr>
<th>Min &amp; Sec </th>
<td> <span class="red">%M</span>→<strong>23</strong>–<strong>45</strong>  <span class="red">%S</span>→<strong>45</strong>–<strong>00</strong> </td></tr>
<tr>
<th>Typical long date</th>
<td> <span class="red"> %A %B %-d, %Y </span>→<strong> Sunday February 5, 2012 </strong>–<strong> Thursday July 19, 2018 </strong> </td></tr>
<tr>
<th>Typical med date</th>
<td> <span class="red"> %Ea %Eb %-d, %Y </span>→<strong> Sun Feb 5, 2012 </strong>–<strong> Thurs July 19, 2018 </strong> </td></tr>
<tr>
<th>ISO and modified iso </th>
<td> <span class="red"> %Y-%m-%d </span>→<strong> 2012-02-05 </strong>–<strong> 2018-07-19 </strong>  <span class="red"> %Y-%b-%d </span>→<strong> 2012-Feb-05 </strong>–<strong> 2018-Jul-19 </strong></td></tr>
<tr>
<th>US and UK/Canada </th>
<td> <span class="red"> %m/%d/%y </span>→<strong> 02/05/12 </strong>–<strong> 07/19/18 </strong>  <span class="red"> %d/%m/%Y </span>→<strong> 05/02/2012 </strong>–<strong> 19/07/2018 </strong></td></tr>
<tr>
<th>12 and 24hr time </th>
<td> <span class="red">%-I:%M%P</span>→<strong>9:23am</strong>–<strong>1:45pm</strong>  <span class="red">%H:%M:%S</span>→<strong>09:23:45</strong>–<strong>13:45:00</strong></td></tr>
</tbody></table>

<ul><li class="newline">Note that Unix defines <strong>%E</strong> as available for alternative formats, so Writeup defines:
<ul><li><strong>%Eb</strong> as an alternative form of <strong>%b</strong> where June, July &amp; Sept are 4 letters instead of three to conform with popular usage.</li>
<li><strong>%Ea</strong> as an alternative form of <strong>%a</strong> where Tues &amp; Thurs are the short days instead of Tue and Thu to conform with popular usage.</li>
<li>Note that the <strong>%-</strong> prefix removes leading zeros or spacing</li></ul></li>
<li>The conversion format is stored in the following variables:
<ul><li><code>$monthdatefmt</code> is used by <code>$monthdate</code> and has the default value: <strong>%Eb %-d</strong>.</li>
<li><code>$yeardatefmt</code> is used by <code>$yeardate</code> and has the default value: <strong>%Eb %-d, %Y</strong>.</li>
<li><code>$customdatefmt</code> is used by <code>$customdate</code> and has the default value: <strong>%Ea %Eb %-d, %Y</strong>.
<ul><li>note that as usual you can append “1” to the name to override the value for the next conversion. e.g. <code>$monthdatefmt1</code> .</li></ul></li></ul></li>
<li>The date is displayed using the HTML5 <code>&lt;time&gt;</code> tag if <code>$timetag</code> is TRUE. (Default value is <strong>TRUE</strong>)</li>
<li>The time tag below is made more visible using the CSS:
<ul><li><code>time {border-bottom: 1px dotted #0A0; cursor:help;} time:hover {border:none;}</code></li></ul></li>
<li>The <code>&lt;time&gt;</code> tag by default will have it’s title attribute set to the date, formatted using <code>$timetag_title</code>.
<ul><li>Unset <code>$timetag_title</code> to prevent this.</li></ul></li></ul>
<table class="borders" style="table-layout: fixed; width:100%;">
<colgroup><col span="3" class="c25" /><col /></colgroup>
<tr><th> Description </th><th>Syntax</th><th>Example</th><th>Result</th></tr>
<tr><th class="demo">Set and display basic date:
</th>
<td><code class="variable">format: yyyy-mm-dd </code></td>
<td><code>$set $d=2012-05-31 The date is $d</code></td>
<td>The date is 2012-05-31
</td></tr>
<tr><th class="demo">Add or subract works with numbers considered to be days:
</th>
<td><code class="variable">date - date ⇒ integer </code></td>
<td><code>$set $i=$d $minus 2012-04-30 The 2nd date is $i days earlier</code></td>
<td>The 2nd date is 0 days earlier
</td></tr>
<tr><th class="demo">An example of add:
</th>
<td><code class="variable">date + integer ⇒ date </code></td>
<td><code>$set $d2=$d $plus 700 Adding 100 weeks to $d gives $d2</code></td>
<td>Adding 100 weeks to 2012-05-31 gives 2014-05-01
</td></tr>
<tr><th class="demo">Months can also be added or subtracted allowing complex date calculations:
</th>
<td><code class="variable">$addmonths integer or $addmonths -integer</code></td>
<td><code>Last day of Feb 2016 is $( 2016-01-01 $addmonths 2 $minus 1 $) </code></td>
<td>Last day of Feb 2016 is 2016-02-29 
</td></tr>
<tr><th class="demo">Print the date as a <code>&lt;time&gt;</code> tag using month format:
</th>
<td><code class="variable">$monthdate </code></td>
<td><code>$d renders as <span class="docNL">↵</span>
$( $d $monthdate $) using format: $monthdatefmt</code></td>
<td>2012-05-31 renders as 
<p><time datetime="2012-05-31" title="May 31, 2012">May 31</time> using format: %Eb %-d</p>
</td></tr>
<tr><th class="demo">Print the date as a <code>&lt;time&gt;</code> tag using year format:
</th>
<td><code class="variable">$yeardate </code></td>
<td><code>$d renders as <span class="docNL">↵</span>
$( $d $yeardate $) using format: $yeardatefmt</code></td>
<td>2012-05-31 renders as 
<p><time datetime="2012-05-31" title="May 31, 2012">May 31, 2012</time> using format: %Eb %-d, %Y</p>
</td></tr>
<tr><th class="demo">Print the date as a <code>&lt;time&gt;</code> tag using custom format:
</th>
<td><code class="variable">$customdate </code></td>
<td><code>$d renders as <span class="docNL">↵</span>
$( $d $customdate $) using format: $customdatefmt</code></td>
<td>2012-05-31 renders as 
<p><time datetime="2012-05-31" title="May 31, 2012">Thurs May 31, 2012</time> using format: %Ea %Eb %-d, %Y</p>
</td></tr>
<tr><th class="demo">Print the date as a <code>&lt;time&gt;</code> tag using ISO format:
</th>
<td><code class="variable">$isodate </code></td>
<td><code>$d renders as <span class="docNL">↵</span>
$( $d $isodate $)</code></td>
<td>2012-05-31 renders as 
<p><time datetime="2012-05-31" title="May 31, 2012">2012-05-31</time></p>
</td></tr>
<tr><th class="demo">change the format for one date:
</th>
<td><code class="variable">$yeardatefmt or $yeardatefmt1</code></td>
<td><code>$set $yeardatefmt1="%A %B %d, %Y" Date: $( $d $yeardate $)</code></td>
<td>Date: <time datetime="2012-05-31" title="May 31, 2012">Thursday May 31, 2012</time>
</td></tr>
<tr><th class="demo">Instead of rendering the <code>&lt;time&gt;</code> tag, simply evaluate the formated date:
</th>
<td><code class="variable">$set $timetag=FALSE </code></td>
<td><code>The date string is $set $timetag=FALSE $( $d $yeardate $) </code></td>
<td>The date string is May 31, 2012 
</td></tr>
<tr><th class="demo">Time is supported by <code>$...datefmt</code> but any date-math sets time to 00:00:
</th>
<td><code class="variable">ISO time: yyyy-mm-ddThh:mm:ss </code></td>
<td><code>$set $dt=${d}T17:35 $set $customdatefmt1="%l:%M%P on %Eb %e, %Y" $( $dt $customdate $)</code></td>
<td><time datetime="2012-05-31T17:35" title="May 31, 2012"> 5:35pm on May 31, 2012</time>
</td></tr>
</table>

<h4 id='other_functions'>4.7.5 Other Functions</h4>
<table class="borders" style="table-layout: fixed; width:100%;">
<colgroup><col span="3" class="c25" /><col /></colgroup>
<tr><th> Description </th><th>Syntax</th><th>Example</th><th>Result</th></tr>
<tr><th class="demo">Generate a warning message (<code>$MSGINFO</code>, <code>$MSGWARNING</code>, <code>$MSGERROR</code> or <code>$MSGCRITICAL</code>):
</th>
<td><code class="variable">$warningmsg MSGLEVEL "delimited words"</code></td>
<td><code>$warningmsg $MSGINFO "Informational message"<span class="docNL">↵</span><br />_Message will only be seen at the time the file is compiled_ </code></td>
<td><em>Message will only be seen at the time the file is compiled</em> </td></tr>
<tr><th class="demo">no operation:
</th>
<td><code class="variable">$noop</code></td>
<td><code>NO$noop OPERATION or no${noop}operation</code></td>
<td>NOOPERATION or nooperation
</td></tr>
</table>

<h2 id='defining_new_keyword_patterns'>5. Defining New Keyword Patterns</h2>

<h3 id='simple_replacements'>5.1 Simple replacements</h3>
<p>Short character sequences such as <code>[</code> or <code>*</code> are pre-defined to map to variables, but new ones can be defined.</p>
<p>E.g. to define <code>@@</code> as a new pattern:</p>
<ul><li><code>$keywordset @@ ${ATAT} ANY</code> will cause every occurrance of <code>@@</code> to be replaced by the variable <code>${ATAT}</code>, anywhere in the line</li>
<li><code>$keywordset @@ ${ATl} LEFT</code> will cause <code>@@</code> at the left end of lines to be replaced by <code>${ATl}</code></li>
<li><code>$keywordset @@ ${ATr} RIGHT</code> will cause <code>@@</code> at the right end of lines to be replaced by <code>${ATr}</code></li>
<li><code>$keywordset @@ ${AT} BOTH</code> will cause lines that contain only <code>@@</code> to be replaced by <code>${AT}</code></li>
<li>It is recommeded that variable include the <code>{}</code> characters so they don’t accidentally combine with any characters following.</li>
<li>So if we define the following (just as an illustration):</li></ul>
<pre>
$ATAT=&lt;img src="i.jpg"/&gt;
$ATl=&lt;img src="l.jpg"/&gt;
$ATr=&lt;img src="r.jpg"/&gt;
$AT=&lt;img src="b.jpg"/&gt;
</pre>
<ul><li>Then it will replace this line:<br />
<code>@@a line with an image at each end@@and one in the middle@@</code></li>
<li>with:<br />
<pre>&lt;img src="l.jpg" /&gt;a line with an image at each end&lt;img src="i.jpg" /&gt;and one in the middle&lt;img src="r.jpg" /&gt;</pre></li>
<li>and a line containing just <code>@@</code> will become:<br />
<pre>&lt;img src="b.jpg"/&gt;</pre></li></ul>

<h3 id='alternating_replacements'>5.2 Alternating replacements</h3>
<ul><li>If a new keyword is intended to alternate between start and end values, like <code>*</code> does, then this may be accomplished with:</li></ul>
<pre>
$keywordset "::" ${mark} ANY     // register the keyword pattern in the normal way
$keywordalt $mark $smark $emark // convert to an alternating pair by registering start and end varables
$smark=&lt;mark&gt;                   //assign values
$emark=&lt;/mark&gt;
</pre>
<ul><li>Then it will replace this line:<br />
<pre>This is a way to ::highlight:: a word</pre></li>
<li>With this:<br />
<pre>&lt;p&gt;This is a way to &lt;mark&gt;highlight&lt;/mark&gt; a word&lt;/p&gt;</pre></li></ul>

<h3 id='paired_replacements'>5.3 Paired replacements</h3>
<ul><li>Sometimes Keyword patterns are used in pairs. If Writeup is informed of this, more intelligent error messages can be generated if a pair is not closed. E.g.</li></ul>
<pre>
$keywordset "((" ${RED} ANY  // register the keyword patterns in the normal way
$keywordset "))" ${eRED} ANY //
$keywordpair $RED $eRED     // register them as paired
$RED=&lt;span class="red"&gt;     //assign values
$eRED=&lt;/span&gt;
</pre>
<ul><li>Then it will replace this line:<br />
<pre>The values will work as a ((pair)) with an intelligent error if the closing )'s are missing.</pre></li>
<li>With this:<br />
<pre>&lt;p&gt;The values will work as a &lt;span class="red"&gt;pair&lt;/span&gt; with an intelligent error if the closing )‘s are missing.&lt;/p&gt;</pre></li></ul>

<h3 id='limitations'>5.4 Limitations</h3>
<ol><li>Care must be taken with single character keywords to prevent circular references</li>
<li>At present, there are limits to the evaluation of variables that are used in non-inline text, such as attributes and styles.
<ul><li>Such variables cannot at present contain built-in functions</li></ul></li></ol>

<h2 id='htmlxmlcss_attribute_generation'>6. HTML/XML/CSS Attribute Generation</h2>

<h3 id='attribute_variables'>6.1 Attribute variables</h3>
<p>These varibles can be set to modify the attributes of tags that follow. Most of these variables can have a “1” suffixed to them which means they are cleared after one use, which will be the next occurrence of the tag:</p>
<ul><li class="newline"><code>$tagname_class</code> sets the class on following tags of that type.
<ul><li>e.g. <code>$li_class=menu</code> will make list items of class “menu”</li>
<li>e.g. <code>$li_class1=menu</code> will make the next list item of class “menu”</li></ul></li>
<li class="newline"><code>$tagname_style</code> sets the style on following tags of that type.
<ul><li>e.g. <code>$li_style=font-weight:bold;</code> will make list items bold</li>
<li>e.g. <code>$li_style1=font-weight:bold;</code> will make the next list item bold</li></ul></li>
<li class="newline"><code>$tagname_attr</code> sets the attribute on following tags of that type.
<ul><li>e.g. <code>$td_attr=colspan="2"</code> will set colspan=“2” on all td’s</li>
<li>e.g. <code>$td_attr1=colspan="2"</code> will set colspan=“2” on the next td</li></ul></li>
<li class="newline"><code>$tagname_title</code> sets the title attribute on following tags of that type.
<ul><li>e.g. <code>$h3_title=Conclusions</code> will set title=“Conclusions” on all h3 tags</li>
<li>e.g. <code>$h3_title1=Conclusions</code> will set title=“Conclusions” on the next h3 tag</li></ul></li>
<li class="newline"><code>$tagname_id</code> sets the id on the following tags of that type (a “1’ is assumed since id’s must be unique)
<ul><li>e.g. <code>$li_id=firstitem</code> will set id=“firstitem” on the next list items</li>
<li>e.g. <code>$li_id1=firstitem</code> identical to <code>$li_id</code></li></ul></li>
<li class="newline">The attribute can be applied <em>only</em> to tags of a particular class using the syntax:
<ul><li><code>$tagname_tagclass_xxxx</code> —Note that as of Writeup 2.0 this will only apply if the class is generated automatically, i.e. in tables and lists where Writeup can created numbered classes for row/col or list-indent.</li>
<li>e.g. <code>$li_row3_class=red</code> will add the class “red” to the third row of tables (if <code>$tableclasses=TRUE</code>)</li>
<li>Note that this selector will take precedence over <code>$li_class</code> if it can be matched.</li></ul></li>
<li class="newline">There are two “wildcard” tags: block and inline. These will only be matched if no other variable match.
<ul><li>e.g. <code>$inline_style1=display:none;</code> will hide the next inline element</li></ul></li></ul>

<h3 id='paragraph_or_other_block_tags'>6.2 Paragraph or other block tags</h3>
<ul><li>no automatic paragraph/block tag on the line if
<ul><li>line begins with <code>/</code></li>
<li>line begins with <code>&lt;/endtag&gt;</code></li>
<li><code>$blocktag</code> is set to “”</li>
<li>line begins with <code>&lt;a block tag&gt;</code></li></ul></li>
<li>else if table, list or heading, use its paragraph tag</li>
<li>else use <code>$blocktag</code> for paragraph tag (defaults to <code>&lt;p&gt;</code>)</li></ul>

<h3 id='setting_the_colgroup_tag'>6.3 Setting the colgroup tag</h3>
<ul><li>The colgroup tag can simply be controlled from a variable
<ul><li><code>$colgroup</code> will set the <strong>columngroup</strong> tag for all following tables</li>
<li><code>$colgroup1</code> will set the <strong>columngroup</strong> tag for one table only</li></ul></li>
<li>e.g.
<ul><li><code>$colgroup1=&lt;col /&gt;&lt;col class="c2" /&gt;&lt;col class="c3" /&gt;</code></li>
<li>and set up styles:</li>
<li><code>$bodystyle=col.c2 {width:400px; background-color:yellow;} col.c3 {background-color:blue;}</code></li></ul></li></ul>
<table class="borders headboth"><colgroup><col /><col class="c2" /><col class="c3" /></colgroup><thead>
<tr>
<th>Table Col1 </th>
<th>Table Col2 </th>
<th>Table Col3 </th></tr>
</thead><tbody>
<tr>
<th>Header     </th>
<td>cell       </td>
<td>cell       </td></tr>
<tr>
<th>Header     </th>
<td>cell       </td>
<td>cell       </td></tr>
</tbody></table>


<h3 id='controlling_the_html_generated_by_markup'>6.4 Controlling the HTML generated by Markup</h3>

<h3 id='the_tag_stack'>6.5 The Tag Stack</h3>

<h3 id='tag_hook_functions'>6.6 Tag hook functions</h3>
<ul><li>e.g. <code>$li_tag=&lt;li&gt;&lt;span class="listitem"&gt;</code>
<ul><li><code>$li_etag=&lt;/span&gt;&lt;/li&gt;</code></li></ul></li></ul>

<h2 id='supported_features_in_github_gfm_and_markdown'>7. Supported features in Github GFM and Markdown</h2>
<ul><li class="newline">Markdown reference: <a href="http://daringfireball.net/projects/markdown/syntax">daringfireball.net/…own/syntax</a></li>
<li>Github GFM reference: <a href="https://help.github.com/articles/github-flavored-markdown">help.github.com/…ored-markdown</a></li></ul>

<h3 id='markdown_feature_support'>7.1 Markdown Feature support</h3>
<table class="borders headboth"><thead>
<tr>
<th>Feature                 </th>
<th>Default </th>
<th><code>$OPT_markdown</code> </th>
<th><code>$OPT_github</code> </th>
<th>Notes </th></tr>
</thead><tbody>
<tr>
<th>Inline HTML             </th>
<td>&#x2713; </td>
<td>&#x2713; </td>
<td>&#x2713; </td>
<td>  </td></tr>
<tr>
<th>Escape special chars    </th>
<td>&#x2713; </td>
<td>&#x2713; </td>
<td>&#x2713; </td>
<td>More robust than Markdown </td></tr>
<tr>
<th>## style headers      </th>
<td>  </td>
<td>&#x2713; </td>
<td>&#x2713; </td>
<td>  </td></tr>
<tr>
<th>underline style headers </th>
<td>  </td>
<td>  </td>
<td>  </td>
<td>not currently supported </td></tr>
<tr>
<th>blockquotes             </th>
<td>&#x2713;‡</td>
<td>&#x2713; </td>
<td>&#x2713; </td>
<td>up to three levels of indent </td></tr>
<tr>
<th>list                    </th>
<td>&#x2713; </td>
<td>&#x2713; </td>
<td>&#x2713; </td>
<td>much fuller support than Markdown </td></tr>
<tr>
<th>code blocks             </th>
<td>  </td>
<td>&#x2713; </td>
<td>&#x2713; </td>
<td>  </td></tr>
<tr>
<th>horizontal rules        </th>
<td>&#x2713;‡</td>
<td>&#x2713; </td>
<td>&#x2713; </td>
<td>supports either <code>- - -</code> or <code>* * *</code> </td></tr>
<tr>
<th>links                   </th>
<td>&#x2713; </td>
<td>&#x2713; </td>
<td>&#x2713; </td>
<td>  </td></tr>
<tr>
<th>reference-style links   </th>
<td>  </td>
<td>  </td>
<td>  </td>
<td>Does not make sense when Writeup’s variables provide a far richer solution. </td></tr>
<tr>
<th>images                  </th>
<td>&#x2713; </td>
<td>&#x2713; </td>
<td>&#x2713; </td>
<td>  </td></tr>
<tr>
<th>emphasis                </th>
<td>&#x2713; </td>
<td>&#x2713; </td>
<td>&#x2713; </td>
<td>Turning on <code>$OPT_markdown</code> or <code>$OPT_github</code> will disable Writeup’s distinction between <code>_</code> and <code>*</code> </td></tr>
<tr>
<th>code                    </th>
<td>  </td>
<td>&#x2713; </td>
<td>&#x2713; </td>
<td>Nested back-ticks not supported. </td></tr>
<tr>
<th>backslash escapes       </th>
<td>&#x2713; </td>
<td>&#x2713; </td>
<td>&#x2713; </td>
<td>  </td></tr>
<tr>
<th>automatic links         </th>
<td>  </td>
<td>  </td>
<td>  </td>
<td>Much simpler to user Github GFM automatic links, as below </td></tr>
<tr>
<th>multi-line paragraphs   </th>
<td>  </td>
<td>&#x2713; </td>
<td>  </td>
<td>Github reports this as the #1 source of errors in Markdown </td></tr>
</tbody></table>

<ul class="plainlist" style="list-style-type:none;"><li><strong>‡</strong> Default support of feature can be turned off by setting <code>$OPT_markdown_default=FALSE</code></li></ul>

<h3 id='github_gfm_feature_support'>7.2 Github GFM Feature Support</h3>
<table class="borders headboth"><thead>
<tr>
<th>Feature                 </th>
<th>Default </th>
<th><code>$OPT_markdown</code> </th>
<th><code>$OPT_github</code> </th>
<th>Notes </th></tr>
</thead><tbody>
<tr>
<th>Newlines = Paragraphs   </th>
<td>&#x2713; </td>
<td>  </td>
<td>&#x2713; </td>
<td>  </td></tr>
<tr>
<th>Multiple underscores in words </th>
<td>&#x2713; </td>
<td>&#x2713; </td>
<td>&#x2713; </td>
<td>  </td></tr>
<tr>
<th>URL autolinking         </th>
<td>&#x2713; </td>
<td>&#x2713; </td>
<td>&#x2713; </td>
<td>  </td></tr>
<tr>
<th>Strikethrough           </th>
<td>&#x2713;‡</td>
<td>&#x2713; </td>
<td>&#x2713; </td>
<td>  </td></tr>
<tr>
<th>Fenced code blocks      </th>
<td>&#x2713;‡</td>
<td>&#x2713; </td>
<td>&#x2713; </td>
<td>  </td></tr>
<tr>
<th>Syntax highlighting     </th>
<td>  </td>
<td>  </td>
<td>  </td>
<td>This is more of a Github use case </td></tr>
<tr>
<th>Task Lists              </th>
<td>&#x2713; </td>
<td>&#x2713; </td>
<td>&#x2713; </td>
<td>  </td></tr>
</tbody></table>


<h2 id='known_limitations'>8. Known limitations</h2>
<ul><li>Varibles defined using the single line method cannot have trailing underscores in the name, nor can curly brackets be used to delimit the variable name</li>
<li>Special characters, (<code>_*{}[]~`@%^</code>) have to be escaped if they occur in an “autolinks” URL</li>
<li>Most of the built in functions, such as <code>$plus</code> cannot be used within styles/attributes etc without first doing an <code>$eval</code></li></ul>
<p>It is anticipated that all the above limitations will be lifted in a future release.</p>


</body></html>
